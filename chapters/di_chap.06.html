<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 2015/HTML Export Filter">
<SCRIPT LANGUAGE="JavaScript">
<!--
if (parent.theMenu) {
    var entryID = parent.theMenu.findEntry(location.pathname, "url", "right", 0);
    if (entryID >= 0) {
        parent.theMenu.selectEntry(entryID);
        if (parent.theMenu.setEntry(entryID, true)) {
            parent.theMenu.refresh();
        }
    }
}
//-->
</SCRIPT>
<LINK REL="STYLESHEET" HREF="../ps_doc.css" CHARSET="UTF-8" TYPE="text/css">
<TITLE>Registering the Frustrum</TITLE></HEAD>
<BODY BACKGROUND=../images/background.gif link="#0F3A68" vlink="#878787" alink="#FF7600" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<A NAME="topofdoc"></A>


<TABLE cellpadding=0 cellspacing=0 border=0 width=100%>
  <TR>
    <TD>&nbsp;<IMG src="../graphics/psbar_l.gif" border=0></TD>
    <TD align=RIGHT valign=CENTER>
        <FONT face="helvetica,arial" SIZE=5 class=NS28pt>
        <B>Registering the Frustrum</B></FONT></TD>
    <TD>&nbsp;&nbsp;</TD>
  </TR>
</TABLE>

<P></P><TABLE BORDER ALIGN=CENTER><TR>
  <TD>&lt;&lt;&lt; <A HREF="di_chap.05.html">Graphical Output</A></TD>
  <TD><A HREF="../di_index.html">Chapters</A></TD>
  <TD><A HREF="di_chap.07.html">Frustrum Functions</A> &gt;&gt;&gt;</TD>
</TR></TABLE>

<H1>Contents</H1>
<UL>
<LI> <A HREF="di_chap.06.html#50511938_pgfId-273840">5.1	Introduction</A>
<LI> <A HREF="di_chap.06.html#50511938_pgfId-280092">5.2	Object-file frustrum</A>
<LI> <A HREF="di_chap.06.html#50511938_pgfId-273976">5.3	Registered frustrum</A>
<LI> <A HREF="di_chap.06.html#50511938_pgfId-273997">5.4	Application I/O</A>
<LI> <A HREF="di_chap.06.html#50511938_pgfId-110680">5.5	Indexed I/O</A>
</UL>
<A NAME="endofcontents"></A>


<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50511938_pgfId-273840"></A>5.1	Introduction


</H1>
<P>
<A NAME="50511938_pgfId-280091"></A><A NAME="50511938_marker-280089"></A><A NAME="50511938_marker-280090"></A>The application writer has several options for providing the Frustrum functions for Parasolid to use. </P>



<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50511938_pgfId-280092"></A>5.2	Object-file frustrum


</H1>
<P>
<A NAME="50511938_pgfId-273845"></A>When Parasolid is used as an object-file library, the Frustrum, GO and Foreign Geometry functions must also be compiled and linked with it. These functions are specified in <A HREF="di_chap.07.html#50511939_36151">Appendix A, “Frustrum Functions”</A> and <A HREF="di_chap.08.html#50511940_18688">Appendix B, “Graphical Output Functions”</A>.</P>
<P>
<A NAME="50511938_pgfId-273852"></A>The functions can be split into logical groups, as shown in the following table:</P>
<P>
<A NAME="50511938_pgfId-273967"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280390"></A>Group</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280392"></A>Functions</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280394"></A>Control</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280396"></A>FSTART FABORT FSTOP</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280398"></A>Memory Management</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280400"></A>FMALLO FMFREE</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280402"></A>File I/O</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280404"></A>FFOPRD FFOPWR FFSKXT FFREAD FFWRIT FFCLOS</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280406"></A>Graphics</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280408"></A>GOOPSG GOSGMT GOCLSG</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280410"></A>Foreign Geometry (curves)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280413"></A>FGCRCU FGEVCU FGPRCU</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280415"></A>Foreign Geometry (surfaces)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280418"></A>FGCRSU FGEVSU FGPRSU</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280420"></A>Rollback (obsolete)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280422"></A>FFOPRB FFSEEK FFTELL</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280424"></A>Shaded Images (obsolete)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50511938_pgfId-280426"></A>GOOPPX GOPIXL GOCLPX</P>
</TD>
</TR>
</TABLE>
<P>
<A NAME="50511938_pgfId-273970"></A>Simple functions are provided for initial testing in the files <CODE>
frustrum.c</CODE>
 and <CODE>
fg.c</CODE>
 in the Parasolid release area.</P>



<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50511938_pgfId-273976"></A>5.3	<A NAME="50511938_14556"></A>Registered frustrum


</H1>
<P>
<A NAME="50511938_pgfId-273977"></A>Parasolid may be supplied as a shared image as well as an object-file library.</P>
<P>
<A NAME="50511938_pgfId-280539"></A>If the following method is used to provide a registered frustrum, the functions do not need to have the 6-letter FORTRAN-style names.</P>
<P>
<A NAME="50511938_pgfId-273978"></A>Parasolid still needs to call the Frustrum, GO and Foreign Geometry functions but the image must use a different mechanism to the object-file library. This is done using the PK functions <A HREF=../headers/pk_session_register_frustrum.html>PK_SESSION_register_frustrum</A> or <A HREF=../headers/pk_session_register_fru_2.html>PK_SESSION_register_fru_2</A>. The installed Frustrum can then be identified using the PK functions <A HREF=../headers/pk_session_ask_frustrum.html>PK_SESSION_ask_frustrum</A> or <A HREF=../headers/pk_session_ask_fru_2.html>PK_SESSION_ask_fru_2</A>.</P>
<P>
<A NAME="50511938_pgfId-273979"></A>There is an example of registering the Frustrum using <A HREF=../headers/pk_session_register_frustrum.html>PK_SESSION_register_frustrum</A> included in the file <CODE>
parasolid_test.c</CODE>
 in the Parasolid release area.</P>
<P>
<A NAME="50511938_pgfId-273982"></A>A C structure is defined, with an element for each required function, and the application must register this with Parasolid before starting the modeller. This mechanism can also be used with the supplied object-file library: it is not specific to the shared image implementation. The advantages to the application of using a registered frustrum are that:</P>
<UL>
<LI>
<A NAME="50511938_pgfId-273983"></A>The application-supplied functions no longer need to have the six letter FORTRAN-style names (as specified in the <A HREF="di_chap.07.html#50511939_36151">“Frustrum Functions”</A> chapter).</LI>
<LI>
<A NAME="50511938_pgfId-273987"></A>The application no longer needs to supply all the specified functions: e.g. if the application uses the PK_DELTA_* functions for partitioned rollback, the functions FFOPRB, FFSEEK and FFTELL need not be registered.</LI>
</UL>
<P>
<A NAME="50511938_pgfId-273988"></A><EM>
All applications must supply equivalents of FMALLO and FMFREE. </EM>An application can omit group of functions as required.</P>
<P>
<A NAME="50511938_pgfId-273992"></A>If a non-registered function is accessed, Parasolid may fail with PK error code PK_ERROR_fru_missing. As an example, an application that does not make use of Foreign Geometry might receive a part from another application that does.</P>
<P>
<A NAME="50511938_pgfId-273993"></A>An application using the shared image can replace the Parasolid image with an updated version without relinking. <STRONG>
It is important that the Parasolid version in the new library is later than the old one. </STRONG>To guard against an incompatible combination, the application can enquire the version number of the installed Parasolid using <A HREF=../headers/pk_session_ask_kernel_version.html>PK_SESSION_ask_kernel_version</A>. For example:</P>
<P>
<A NAME="50511938_pgfId-280016"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50511938_pgfId-280029"></A><A HREF=../headers/pk_session_kernel_version_t.html>PK_SESSION_kernel_version_t</A> info;</PRE>
<PRE><A NAME="50511938_pgfId-280999"></A><A HREF=../headers/pk_session_ask_kernel_version.html>PK_SESSION_ask_kernel_version</A> (&amp;info);</PRE>
<PRE><A NAME="50511938_pgfId-281007"></A>if (info.major_revision&lt;9)</PRE>
<PRE><A NAME="50511938_pgfId-281015"></A>    {</PRE>
<PRE><A NAME="50511938_pgfId-281023"></A>    fprintf (stderr, &quot;Parasolid v9 is required&quot;);</PRE>
<PRE><A NAME="50511938_pgfId-281031"></A>    exit (EXIT_FAILURE);</PRE>
<PRE><A NAME="50511938_pgfId-281039"></A>    }</PRE>
</TD>
</TR>
</TABLE>
<P>
<A NAME="50511938_pgfId-273995"></A>This function may be called at any time, in particular, without starting the modeller, by calling this function in the shared image.</P>
<P>
<A NAME="50511938_pgfId-288661"></A>If you wish to transmit and receive embedded mesh data, or optimally transmit and receive mesh data, you need to register the frustrum seek function FFSKXT using <A HREF=../headers/pk_session_register_fru_2.html>PK_SESSION_register_fru_2</A>. This frustrum allows for the optimised transmitting and receiving of binary XT files that contain embedded meshes. You can identify the installed frustrum using <A HREF=../headers/pk_session_ask_fru_2.html>PK_SESSION_ask_fru_2</A>.</P>
<P>
<A NAME="50511938_pgfId-294216"></A>If you wish to call Parasolid’s rendering and faceting functions concurrently, or to use SMP when generating graphical output, you can indicate that the GO functions, GOSGMT, GOOPSG and GOCLSG, are thread-safe using the <CODE>
go_thread_safe</CODE>
 option in <A HREF=../headers/pk_session_register_fru_2.html>PK_SESSION_register_fru_2</A>. Where practical, we recommend a thread-safe GO implementation to allow your application to benefit from the full set of performance optimisations available in Parasolid.</P>
<P>
<A NAME="50511938_pgfId-293805"></A>&nbsp;</P>
<P>
<A NAME="50511938_pgfId-288609"></A>&nbsp;</P>
<TABLE>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<ADDRESS>
<A NAME="50511938_pgfId-288627"></A>Note: We strongly recommend that you register your frustrum using <A HREF=../headers/pk_session_register_fru_2.html>PK_SESSION_register_fru_2</A> </ADDRESS><BR>
</TD>
</TR>
</TABLE>



<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50511938_pgfId-273997"></A>5.4	<A NAME="50511938_marker-273996"></A>Application I/O


</H1>
<P>
<A NAME="50511938_pgfId-273998"></A>There is a transmit file format called ‘application i/o’, or ‘applio’. When this format is selected in <A HREF=../headers/pk_part_transmit.html>PK_PART_transmit</A> and <A HREF=../headers/pk_partition_transmit.html>PK_PARTITION_transmit</A>, transmit files are written and read using a suite of functions provided by the application. Using these functions enables the application to do further processing of the output data before storing it.</P>
<P>
<A NAME="50511938_pgfId-273999"></A>The functions open files, read and write chars, bytes, shorts, ints and doubles to/from these files, and close the files; they are registered using <A HREF=../headers/pk_session_register_applio.html>PK_SESSION_register_applio</A>.</P>
<P>
<A NAME="50511938_pgfId-274000"></A>Note that the application is responsible for any conversion required between machine types (e.g. for endian byte ordering and floating point representation). The read functions must be handed the correct number of computation-ready data items, as written out by the write functions.</P>
<P>
<A NAME="50511938_pgfId-274001"></A>Snapshot files cannot use this format - they must be text or machine-dependent binary.</P>



<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50511938_pgfId-110680"></A>5.5	Indexed I/O


</H1>
<P>
<A NAME="50511938_pgfId-280745"></A>There is also a transmit file format called <STRONG>
indexed i/o</STRONG>, or <STRONG>
indexio</STRONG>. When this <CODE>
transmit_format</CODE>
 is selected in <A HREF=../headers/pk_part_transmit.html>PK_PART_transmit</A> and <A HREF=../headers/pk_partition_transmit.html>PK_PARTITION_transmit</A>, transmit files are written using a suite of functions provided by the application. Using these functions enables your application to subsequently receive only specified faces from the parts contained in the transmitted files.</P>
<P>
<A NAME="50511938_pgfId-280761"></A>The functions open files, read from and write to these files in both Unicode and non-Unicode format, and close the files; they are registered using <A HREF=../headers/pk_session_register_indexio.html>PK_SESSION_register_indexio</A>.</P>
<P>
<A NAME="50511938_pgfId-280732"></A>&nbsp;</P>

<A NAME="endofdoc"></A>

<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<P></P><TABLE BORDER ALIGN=CENTER><TR>
  <TD>&lt;&lt;&lt; <A HREF="di_chap.05.html">Graphical Output</A></TD>
  <TD><A HREF="../di_index.html">Chapters</A></TD>
  <TD><A HREF="di_chap.07.html">Frustrum Functions</A> &gt;&gt;&gt;</TD>
</TR></TABLE>

</BODY>
</HTML>
