<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 2015/HTML Export Filter">
<SCRIPT LANGUAGE="JavaScript">
<!--
if (parent.theMenu) {
    var entryID = parent.theMenu.findEntry(location.pathname, "url", "right", 0);
    if (entryID >= 0) {
        parent.theMenu.selectEntry(entryID);
        if (parent.theMenu.setEntry(entryID, true)) {
            parent.theMenu.refresh();
        }
    }
}
//-->
</SCRIPT>
<LINK REL="STYLESHEET" HREF="../ps_doc.css" CHARSET="UTF-8" TYPE="text/css">
<TITLE>Tabular Output Of Faceting</TITLE></HEAD>
<BODY BACKGROUND=../images/background.gif link="#0F3A68" vlink="#878787" alink="#FF7600" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<A NAME="topofdoc"></A>


<TABLE cellpadding=0 cellspacing=0 border=0 width=100%>
  <TR>
    <TD>&nbsp;<IMG src="../graphics/psbar_l.gif" border=0></TD>
    <TD align=RIGHT valign=CENTER>
        <FONT face="helvetica,arial" SIZE=5 class=NS28pt>
        <B>Tabular Output Of Faceting</B></FONT></TD>
    <TD>&nbsp;&nbsp;</TD>
  </TR>
</TABLE>

<P></P><TABLE BORDER ALIGN=CENTER><TR>
  <TD>&lt;&lt;&lt; <A HREF="fd_chap.110.html">Faceting Output Via GO </A></TD>
  <TD><A HREF="../fd_index.html">Chapters</A></TD>
  <TD><A HREF="fd_chap.112.html">Parasolid View Matrices</A> &gt;&gt;&gt;</TD>
</TR></TABLE>

<H1>Contents</H1>
<UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-294749">110.1	Introduction </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-294787">110.2	How facet data is returned in tabular form </A>
<UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-295088">110.2.1	Types of table </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-295111">110.2.2	Choosing which tables to return </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-295161">110.2.3	Accessing the returned data </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-390597">110.2.4	Choosing how to access the returned data </A>
</UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-295170">110.3	Tabular faceting and threads </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-295196">110.4	Topological information </A>
<UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-295202">110.4.1	Defining facet boundaries </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-295579">110.4.2	Finding which facets are adjacent </A>
<UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-295817">110.4.2.1	When does co-fin matching occur? </A>
</UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-296150">110.4.3	Facet strip information </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-296816">110.4.4	Associating fins with facet geometry </A>
<UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-297172">110.4.4.1	Example </A>
</UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-297752">110.4.5	Options for outputting topological information </A>
<UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-297780">110.4.5.1	Ensuring consistent parameterisation for facets on periodic surfaces </A>
</UL>
</UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-297812">110.5	Geometric information </A>
<UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-297821">110.5.1	Obtaining coordinate information </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-297831">110.5.2	Obtaining face normal information </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-297843">110.5.3	Obtaining surface parameter information </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-297852">110.5.4	Obtaining derivative information </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-513845">110.5.5	Obtaining face curvature information </A>
</UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-297862">110.6	Tracking information </A>
<UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-297888">110.6.1	Mapping facets to faces </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-298007">110.6.2	Mapping facet strips to faces </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-298465">110.6.3	Mapping fins to edges </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-298663">110.6.4	Mapping facet points to topology </A>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-298692">110.6.5	Mapping facet fins to model topology </A>
</UL>
<LI> <A HREF="fd_chap.111.html#50409902_pgfId-298708">110.7	Error information </A>
</UL>
<A NAME="endofcontents"></A>


<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50409902_pgfId-294749"></A>110.1	Introduction 


</H1>
<P>
<A NAME="50409902_pgfId-294753"></A>Parasolid can create facet information in tabular format, defining the facet mesh in terms of connected facet strip, facet, fin and vertex indices. Unlike facet output via the GO interface, tabular output of faceting allows you to output connectivity information for a facet mesh. This chapter describes how you can return facet data to your application in tabular format using <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A>, and how you can control which information is returned. </P>
<P>
<A NAME="50409902_pgfId-581210"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<ADDRESS>
<A NAME="50409902_pgfId-581206"></A>Note: This function offers partial support for topology that has facet geometry (meshes and plines). See the <EM>
<A HREF=../pk_index.html>PK Interface Programming Reference</A> Manual</EM> for more information.</ADDRESS><BR>
</TD>
</TR>
</TABLE>
<UL>
<LI>
<A NAME="50409902_pgfId-294757"></A><A HREF="fd_chap.111.html#50409902_36939">Section 110.2, “How facet data is returned in tabular form”</A>, explains what tabular facet data is, and how you can control it.</LI>
<LI>
<A NAME="50409902_pgfId-294761"></A><A HREF="fd_chap.111.html#50409902_26560">Section 110.3, “Tabular faceting and threads”</A>, explains how you can take advantage of symmetric multi-processing in tabular faceting.</LI>
<LI>
<A NAME="50409902_pgfId-294765"></A><A HREF="fd_chap.111.html#50409902_51318">Section 110.4, “Topological information”</A>, describes the topological information that <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> returns.</LI>
<LI>
<A NAME="50409902_pgfId-294769"></A><A HREF="fd_chap.111.html#50409902_95805">Section 110.5, “Geometric information”</A>, describes the geometric information that <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> returns.</LI>
<LI>
<A NAME="50409902_pgfId-294773"></A><A HREF="fd_chap.111.html#50409902_52346">Section 110.6, “Tracking information”</A>, describes the tracking information that <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> returns.</LI>
<LI>
<A NAME="50409902_pgfId-294777"></A><A HREF="fd_chap.111.html#50409902_16396">Section 110.7, “Error information”</A>, describes how errors are reported by <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A>.</LI>
</UL>
<P>
<A NAME="50409902_pgfId-294780"></A>For information on the graphical output of facet geometry, see <A HREF="fd_chap.110.html#50409901_27922">Chapter 109, “Faceting Output Via GO”</A>.</P>
<P>
<A NAME="50409902_pgfId-471332"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-455200"></A>Related Topics: </P>
<UL>
<UL>
<LI>
<A NAME="50409902_pgfId-455183"></A><A HREF="fd_chap.109.html#50409900_89301">Section 108.2.13, “Incremental faceting”</A></LI>
<LI>
<A NAME="50409902_pgfId-455219"></A><A HREF="fd_chap.116.html#50409908_23582">Chapter 115, “Symmetric Multi-Processing In Parasolid”</A></LI>
</UL>
</UL>
</TD>
</TR>
</TABLE>



<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50409902_pgfId-294787"></A>110.2	<A NAME="50409902_36939"></A><A NAME="50409902_marker-294783"></A><A NAME="50409902_marker-294784"></A><A NAME="50409902_marker-294785"></A><A NAME="50409902_marker-294786"></A>How facet data is returned in tabular form 


</H1>
<P>
<A NAME="50409902_pgfId-294788"></A>A facet is an ordered sequence of fins that join vertices together. A facet strip is an ordered sequence of connected facets. A facet mesh is a set of either connected facets or facet strips. The topology of a facet mesh can be described in terms of the connectivity between the facets or facet strips in the facet mesh, their associated fins, and the vertices at the head of each fin. The geometry of a facet mesh is derived from the geometry of the original model: the head of every fin in the facet mesh has a set of associated geometric information (point, normal, parameter, derivative, principal directions and curvatures) that is derived from the corresponding position in the original model.</P>
<P>
<A NAME="50409902_pgfId-294792"></A><A HREF="fd_chap.111.html#50409902_16805"><EM>
Figure 110-1</EM></A> shows a hexagonal facet mesh consisting of six facets, numbered f0 to f5. These facets join seven vertices together, numbered v0 to v6. For simplicity, fin numbering is not shown.</P>
<P>
<A NAME="50409902_pgfId-400556"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1225.gif">

<P>
<A NAME="50409902_pgfId-294904"></A>Figure 110-1 <A NAME="50409902_16805"></A>Hexagonal face mesh</P>
<P>
<A NAME="50409902_pgfId-294905"></A>Vertex v1 is called an <STRONG>
interior vertex</STRONG>. The other vertices lie on the mesh boundary and are known as <STRONG>
exterior vertices</STRONG>.</P>
<P>
<A NAME="50409902_pgfId-294912"></A><A HREF="fd_chap.111.html#50409902_35975"><EM>
Figure 110-2</EM></A> shows a detail of facets f0 and f1 from <A HREF="fd_chap.111.html#50409902_16805"><EM>
Figure 110-1</EM></A>, with fin information added. By convention, the fins around a facet point anti-clockwise when the facet mesh is viewed from the outside of a face. Each fin is associated with exactly one vertex: the one lying at the head of the fin.</P>
<P>
<A NAME="50409902_pgfId-400633"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1226.gif">

<P>
<A NAME="50409902_pgfId-295039"></A>Figure 110-2 <A NAME="50409902_35975"></A>Facets in schematic form</P>
<P>
<A NAME="50409902_pgfId-295040"></A>A facet is therefore bound to the fins that form its boundary, and those fins in turn are bound to the vertices they point to. You can describe this information in tabular form as follows (for facets f0 and f1):</P>
<P>
<A NAME="50409902_pgfId-295084"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295043"></A>Facet</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295045"></A>Connected fins</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295047"></A>Head vertex of fin</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="3" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295049"></A>f0</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295051"></A>e0</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295053"></A>v0</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295057"></A>e1</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295059"></A>v1</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295063"></A>e2</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295065"></A>v2</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="3" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295067"></A>f1</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295069"></A>e3</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295071"></A>v1</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295075"></A>e4</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295077"></A>v3</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295081"></A>e5</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295083"></A>v2</P>
</TD>
</TR>
</TABLE>
<P>
<A NAME="50409902_pgfId-295085"></A>Unlike the example above, all the tables of facet data that <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> can return associate just two types of information. There are many of these tables to choose from, so that your application has a rich range of data to choose from. This chapter describes what tables you can return, and what the information in those tables represents.</P>

<H3>
<A NAME="50409902_pgfId-295088"></A>	110.2.1 	<A NAME="50409902_marker-295086"></A><A NAME="50409902_marker-295087"></A>Types of table </H3>
<P>
<A NAME="50409902_pgfId-295089"></A>Tabular data is returned by <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> in one of two types of table:</P>
<P>
<A NAME="50409902_pgfId-295105"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295092"></A>Table type</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295094"></A>Description</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295096"></A>Indexed table</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295098"></A>Indexed tables are simple two-column tables used to represent one-to-one mappings in the returned tabular data. The first column of the table represents an index to the actual value, which is stored in the second column. </P>
<P>
<A NAME="50409902_pgfId-295099"></A>Indexed tables are implemented as one-dimensional arrays: the array index represents the first column of the table, and the value is stored in the array.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295101"></A>Lookup table</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-295103"></A>Lookup tables are more complex two or more column tables that can represent one-to-one, one-to-many, or many-to-one relationships in the returned tabular data (that is, data in any of the columns can be repeated if required).</P>
<P>
<A NAME="50409902_pgfId-295104"></A>Lookup tables are implemented as an array of structures, in which each structure contains two or more fields. The index of the array itself has no specific meaning.</P>
</TD>
</TR>
</TABLE>
<P>
<A NAME="50409902_pgfId-295106"></A>Many examples of both types of table are given throughout this chapter.</P>


<H3>
<A NAME="50409902_pgfId-295111"></A>	110.2.2 	<A NAME="50409902_61016"></A><A NAME="50409902_marker-295108"></A><A NAME="50409902_marker-295109"></A><A NAME="50409902_marker-295110"></A>Choosing which tables to return </H3>
<P>
<A NAME="50409902_pgfId-295112"></A>Like <A HREF=../headers/pk_topol_render_facet_o_t.html>PK_TOPOL_render_facet_o_t</A>, <A HREF=../headers/pk_topol_facet_2_o_t.html>PK_TOPOL_facet_2_o_t</A> contains two sub-structures:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-295116"></A><A HREF=../headers/pk_topol_facet_mesh_2_o_t.html>PK_TOPOL_facet_mesh_2_o_t</A> (described in <A HREF="fd_chap.109.html#50409900_30298">Chapter 108, “Facet Mesh Generation”</A>).</LI>
<LI>
<A NAME="50409902_pgfId-295117"></A><A HREF=../headers/pk_topol_facet_choice_2_o_t.html>PK_TOPOL_facet_choice_2_o_t</A> (described in this chapter).</LI>
</UL>
<P>
<A NAME="50409902_pgfId-295118"></A>You use <A HREF=../headers/pk_topol_facet_choice_2_o_t.html>PK_TOPOL_facet_choice_2_o_t</A> to control which types of faceting data are returned. These are divided into the following categories:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-295122"></A>Topological information. See <A HREF="fd_chap.111.html#50409902_51318">Section 110.4</A>.</LI>
<LI>
<A NAME="50409902_pgfId-295126"></A>Geometric information. See <A HREF="fd_chap.111.html#50409902_95805">Section 110.5</A>.</LI>
<LI>
<A NAME="50409902_pgfId-295130"></A>Tracking information. See <A HREF="fd_chap.111.html#50409902_52346">Section 110.6</A>.</LI>
<LI>
<A NAME="50409902_pgfId-295134"></A>Error information. See <A HREF="fd_chap.111.html#50409902_16396">Section 110.7</A>.</LI>
</UL>
<P>
<A NAME="50409902_pgfId-295135"></A>The default settings for each of the available options ensures that no tabular data is returned for a facet mesh. In order to return tabular data, you need to set the options you are interested in after you have initialised <A HREF=../headers/pk_topol_facet_choice_2_o_t.html>PK_TOPOL_facet_choice_2_o_t</A>.</P>
<P>
<A NAME="50409902_pgfId-295139"></A>Like all Parasolid options structures, you can initialise <A HREF=../headers/pk_topol_facet_2_o_t.html>PK_TOPOL_facet_2_o_t</A> by calling the corresponding PK_TOPOL_facet_2_o_m macro. Unlike other options structures, calling this macro initialises both the <A HREF=../headers/pk_topol_facet_mesh_2_o_t.html>PK_TOPOL_facet_mesh_2_o_t</A> and PK_TOPOL_choice_2_o_t options structures, as shown in the example below.</P>
<P>
<A NAME="50409902_pgfId-295157"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50409902_pgfId-295142"></A><STRONG>/* declaration and initialisation */</STRONG></PRE>
<PRE><A NAME="50409902_pgfId-295143"></A><A HREF=../headers/pk_topol_facet_2_o_t.html>PK_TOPOL_facet_2_o_t</A> my_option_struct;</PRE>
<PRE><A NAME="50409902_pgfId-295144"></A>&nbsp;</PRE>
<PRE><A NAME="50409902_pgfId-295145"></A><STRONG>/* Set default mesh and choice options */</STRONG></PRE>
<PRE><A NAME="50409902_pgfId-295146"></A>PK_TOPOL_facet_2_o_m (my_option_struct);</PRE>
<PRE><A NAME="50409902_pgfId-295147"></A>                    </PRE>
<PRE><A NAME="50409902_pgfId-295148"></A><STRONG>/* Set specific mesh options */</STRONG></PRE>
<PRE><A NAME="50409902_pgfId-295149"></A>my_option_struct.control.<EM>&lt;field1&gt;</EM> = <EM>&lt;value1&gt;</EM>;</PRE>
<PRE><A NAME="50409902_pgfId-295150"></A>my_option_struct.control.<EM>&lt;field2&gt;</EM> = <EM>&lt;value2&gt;</EM>;</PRE>
<PRE><A NAME="50409902_pgfId-295151"></A>&nbsp;</PRE>
<PRE><A NAME="50409902_pgfId-295152"></A><STRONG>/* Set specific choice of tables to output */</STRONG></PRE>
<PRE><A NAME="50409902_pgfId-295153"></A>my_option_struct.choice.<EM>&lt;field1&gt;</EM> = <EM>&lt;value1&gt;</EM>;</PRE>
<PRE><A NAME="50409902_pgfId-295154"></A>my_option_struct.choice.<EM>&lt;field2&gt;</EM> = <EM>&lt;value2&gt;</EM>;</PRE>
<PRE><A NAME="50409902_pgfId-295155"></A>&nbsp;</PRE>
<PRE><A NAME="50409902_pgfId-295156"></A><STRONG>/* ... now call <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A>(...); */</STRONG></PRE>
</TD>
</TR>
</TABLE>


<H3>
<A NAME="50409902_pgfId-295161"></A>	110.2.3 	<A NAME="50409902_marker-295158"></A><A NAME="50409902_marker-295159"></A><A NAME="50409902_marker-295160"></A>Accessing the returned data </H3>
<P>
<A NAME="50409902_pgfId-295162"></A>Tabular data is returned in the <A HREF=../headers/pk_topol_facet_2_r_t.html>PK_TOPOL_facet_2_r_t</A> structure. It contains totals for:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-295163"></A>The number of facets in the facet mesh.</LI>
<LI>
<A NAME="50409902_pgfId-295164"></A>The number of facet strips in the facet mesh.</LI>
<LI>
<A NAME="50409902_pgfId-295165"></A>The number of fins in the facet mesh.</LI>
<LI>
<A NAME="50409902_pgfId-295166"></A>The number of data tables requested.</LI>
</UL>
<P>
<A NAME="50409902_pgfId-295167"></A>The data tables themselves are returned in a <A HREF=../headers/pk_topol_facet_table_t.html>PK_TOPOL_facet_table_t</A> sub-structure, which contains pointers to arrays of data that define the facet topology, geometry, tracking data, and error data for the facet mesh.</P>
<P>
<A NAME="50409902_pgfId-295168"></A>Option names in <A HREF=../headers/pk_topol_facet_choice_2_o_t.html>PK_TOPOL_facet_choice_2_o_t</A> match field names in this return structure. Thus, to return the <CODE>
facet_fin</CODE>
 table, just set the <CODE>
facet_fin</CODE>
 option in the options structure.</P>


<H3>
<A NAME="50409902_pgfId-390597"></A>	110.2.4 	<A NAME="50409902_10595"></A>Choosing how to access the returned data </H3>
<P>
<A NAME="50409902_pgfId-390598"></A>By default, <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> returns a set of tables containing facet data for all the bodies and/or faces being faceted. However, you can instead choose to return a separate set of tables for each body instance from which faces are being faceted. If you do this, and you are faceting a list of faces or a mixture of bodies and faces, faces from the same body (with the same transform) are output in the same set of tables. </P>
<P>
<A NAME="50409902_pgfId-387875"></A>Returning multiple sets of tables can be particularly useful if you are taking advantage of the multi-threading capabilities of a processor to improve faceting performance, as described in <A HREF="fd_chap.111.html#50409902_26560">Section 110.3, “Tabular faceting and threads”</A>. In this situation, returning multiple sets of tables can reduce memory requirements for faceting, because the memory for each body instance from which faces are being faceted can be freed as soon as faceting for that body instance has completed , rather than waiting for all faceting to be completed. Even if you are not using SMP, this strategy still allows your application to start displaying a faceted body while still waiting for faceting of other bodies to complete. </P>
<P>
<A NAME="50409902_pgfId-377022"></A>In order to return a separate facet table for each body instance, you need to define a callback function. Facet tables are then returned via the supplied arguments of that callback function, rather than via the return structure of <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A>. </P>
<P>
<A NAME="50409902_pgfId-387447"></A>In addition to the <CODE>
topol</CODE>
 being faceted and the corresponding facet tables, the associated transform is also returned via the callback. This means, for example, that facets for different instances of the same body are output in different callbacks.</P>
<P>
<A NAME="50409902_pgfId-387438"></A>The callback function you define should return a PK error code and receive the following arguments:</P>
<P>
<A NAME="50409902_pgfId-378044"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-378025"></A>Field</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-378027"></A>Description</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50409902_pgfId-378029"></A>topol</PRE>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-378031"></A>The body that the facets belong to.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50409902_pgfId-378033"></A>transform</PRE>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-378035"></A>The transform applied to the supplied <CODE>
topol</CODE>
.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50409902_pgfId-378037"></A>tables</PRE>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-378039"></A>The faceting tables that are returned. </P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50409902_pgfId-378041"></A>context</PRE>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-378043"></A>A pointer to context data for the callback</P>
</TD>
</TR>
</TABLE>
<P>
<A NAME="50409902_pgfId-377023"></A>This callback function is passed to <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> using the following fields in <A HREF=../headers/pk_topol_facet_choice_2_o_t.html>PK_TOPOL_facet_choice_2_o_t</A>: </P>
<P>
<A NAME="50409902_pgfId-379046"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-379029"></A>Option</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-379031"></A>Description</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50409902_pgfId-379033"></A>facet_tables_cb</PRE>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-379035"></A>A pointer to the callback function.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50409902_pgfId-379037"></A>facet_tables_context</PRE>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-379039"></A>Contextual data for use by the <CODE>
facet_tables_cb</CODE>
 callback. This argument is a pointer to data for the arguments received by the callback.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50409902_pgfId-379041"></A>thread_safe</PRE>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-379043"></A>Whether the callback function is thread safe. You can use this option if you are taking advantage of SMP in faceting (<A HREF="fd_chap.111.html#50409902_26560">Section 110.3</A>). Default: PK_LOGICAL_false.</P>
<UL>
<LI>
<A NAME="50409902_pgfId-379044"></A>If this is PK_LOGICAL_true, then the callback function must be thread safe and must not attempt to access or write to the same piece of memory at the same time. Any alloc and free functions registered via functionality that uses <A HREF=../headers/pk_memory_frustrum_t.html>PK_MEMORY_frustrum_t</A> must also be thread safe. </LI>
<LI>
<A NAME="50409902_pgfId-379859"></A>If this is PK_LOGICAL_false, then the callback function will not be called separately and simultaneously by different threads, even if you are taking advantage of SMP in faceting.</LI>
</UL>
</TD>
</TR>
</TABLE>
<P>
<A NAME="50409902_pgfId-379470"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<ADDRESS>
<A NAME="50409902_pgfId-379488"></A>Note: If you use a callback to return facet data, Parasolid does not free the memory for the tables itself. You should therefore call <A HREF=../headers/pk_topol_facet_2_r_f.html>PK_TOPOL_facet_2_r_f</A> for the <CODE>
tables</CODE>
 returned by the supplied <CODE>
facet_tables_cb</CODE>
, and then call <A HREF=../headers/pk_memory_free.html>PK_MEMORY_free</A> to free the pointer to the tables. </ADDRESS><BR>
</TD>
</TR>
</TABLE>




<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50409902_pgfId-295170"></A>110.3	<A NAME="50409902_26560"></A>Tabular faceting and threads 


</H1>
<P>
<A NAME="50409902_pgfId-295176"></A>If you have enabled symmetric multi-processing in Parasolid (see <A HREF="fd_chap.116.html#50409908_72847">Section 115.2.1, “Enabling SMP within Parasolid”</A>, for information), then you can take advantage of the multi-threading capabilities of a processor using the <CODE>
smp</CODE>
 option in <A HREF=../headers/pk_topol_facet_choice_2_o_t.html>PK_TOPOL_facet_choice_2_o_t</A>. </P>
<P>
<A NAME="50409902_pgfId-541331"></A>To facet different bodies simultaneously using SMP in Parasolid, set <CODE>
smp</CODE>
 to <A HREF=../headers/pk_facet_smp_t.html>PK_facet_smp_body_c</A>. By default (<A HREF=../headers/pk_facet_smp_t.html>PK_facet_smp_no_c</A>), tabular faceting does not take advantage of Parasolid SMP, even if SMP has been enabled in a Parasolid session. See <A HREF="fd_chap.116.html#50409908_23582">Chapter 115, “Symmetric Multi-Processing In Parasolid”</A>, for more information about SMP. </P>
<P>
<A NAME="50409902_pgfId-380199"></A>By defining a callback function to return facet data on a body by body basis, you can improve performance even more in a multi-threading environment. See <A HREF="fd_chap.111.html#50409902_10595">Section 110.2.4, “Choosing how to access the returned data”</A>, for more details. </P>
<P>
<A NAME="50409902_pgfId-546987"></A>If you are using multiple application threads, you can set <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> to run concurrently. By doing this, you can request that Parasolid allows calls to this function from multiple application threads to run simultaneously. See <A HREF="fd_chap.105.html#50409896_94155">Section 104.4, “Controlling exclusivity of rendering and faceting functions”</A>, for more information.</P>
<P>
<A NAME="50409902_pgfId-547834"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-547857"></A>Related Topics: </P>
<UL>
<UL>
<LI>
<A NAME="50409902_pgfId-547844"></A><A HREF="fd_chap.115.html#50409907_62860">Section 114.3, “Controlling function exclusivity”</A></LI>
</UL>
</UL>
</TD>
</TR>
</TABLE>



<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50409902_pgfId-295196"></A>110.4	<A NAME="50409902_13792"></A><A NAME="50409902_51318"></A><A NAME="50409902_marker-547770"></A><A NAME="50409902_marker-547771"></A>Topological information 


</H1>
<P>
<A NAME="50409902_pgfId-295197"></A>You can return facet data describing the relationship between any two types of topological entity (facet/facet strip/fin/vertex). </P>

<H3>
<A NAME="50409902_pgfId-295202"></A>	110.4.1 	<A NAME="50409902_marker-295198"></A><A NAME="50409902_marker-295199"></A><A NAME="50409902_marker-295200"></A><A NAME="50409902_marker-295201"></A>Defining facet boundaries </H3>
<P>
<A NAME="50409902_pgfId-295203"></A>Facet-fin connectivity is returned in the <CODE>
facet_fin</CODE>
 table. This table gives you information about which fins are associated with which facets, and thus provides information about the facet boundaries. The <CODE>
facet_fin</CODE>
 table is implemented as a lookup table that groups sets of fins owned by the same facet together. <A HREF="fd_chap.111.html#50409902_27766"><EM>
Figure 110-1</EM></A> shows the facet-fin connectivity for facets f0 and f1 from <A HREF="fd_chap.111.html#50409902_35975"><EM>
Figure 110-2</EM></A>.</P>
<P>
<A NAME="50409902_pgfId-400810"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1227.gif">

<P>
<A NAME="50409902_pgfId-295342"></A>Figure 110-1 <A NAME="50409902_27766"></A>Returning connections between facets and fins</P>
<P>
<A NAME="50409902_pgfId-295346"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<ADDRESS>
<A NAME="50409902_pgfId-295345"></A>Note: Groups of facets (in the first column) are returned in numerical order. </ADDRESS><BR>
</TD>
</TR>
</TABLE>
<P>
<A NAME="50409902_pgfId-295347"></A>If a facet contains holes (by setting <CODE>
shape</CODE>
 to <A HREF=../headers/pk_facet_shape_t.html>PK_facet_shape_any_c</A>, as described in <A HREF="fd_chap.109.html#50409900_87405">Section 108.2.1</A>), then it is described by several independent sequences of connected fins, as follows:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-295351"></A>A sequence of the exterior fins that define the facet’s outside boundary</LI>
<LI>
<A NAME="50409902_pgfId-295352"></A>One or more sequences of interior fins, one for each hole. </LI>
</UL>
<P>
<A NAME="50409902_pgfId-295353"></A><A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> returns the sequence of exterior fins first, followed by each sequence of interior fins. The value -1 is returned between each independent sequence, so as to distinguish the start and end of each sequence.</P>
<P>
<A NAME="50409902_pgfId-295357"></A><A HREF="fd_chap.111.html#50409902_27980"><EM>
Figure 110-2</EM></A> illustrates a facet, f1, that contains two holes, giving a total of three independent sequences of connected fins. The <CODE>
facet_fin</CODE>
 table for this facet is shown.</P>
<P>
<A NAME="50409902_pgfId-400882"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1228.gif">

<P>
<A NAME="50409902_pgfId-295566"></A>Figure 110-2 <A NAME="50409902_27980"></A>Fin sequence of interior holes</P>
<P>
<A NAME="50409902_pgfId-295567"></A>The relative ordering of each sequence of interior fins returned in a <CODE>
facet_fin</CODE>
 table is arbitrary. In <A HREF="fd_chap.111.html#50409902_27980"><EM>
Figure 110-2</EM></A>, the e5-e6-e7 sequence could have been returned before the e8-e9-e10 sequence. </P>
<P>
<A NAME="50409902_pgfId-295574"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<ADDRESS>
<A NAME="50409902_pgfId-295573"></A>Note: Fins in an interior hole point in a clockwise direction when viewed outside the facet. </ADDRESS><BR>
</TD>
</TR>
</TABLE>


<H3>
<A NAME="50409902_pgfId-295579"></A>	110.4.2 	<A NAME="50409902_marker-295575"></A><A NAME="50409902_marker-295576"></A><A NAME="50409902_marker-295577"></A><A NAME="50409902_12064"></A>Finding which facets are adjacent </H3>
<P>
<A NAME="50409902_pgfId-295580"></A>The <CODE>
fin_fin</CODE>
 table returns information about which fins are connected to which other fins in a facet mesh. This is called <STRONG>
fin to co-fin matching</STRONG>, and returning this information lets you identify which facets are adjacent to each other in the facet mesh. The <CODE>
fin_fin</CODE>
 table is implemented as an indexed table that maps fin indices into their co-fin indices.</P>
<P>
<A NAME="50409902_pgfId-295584"></A><A HREF="fd_chap.111.html#50409902_15165"><EM>
Figure 110-3</EM></A> repeats the same hexagonal facet mesh used in earlier examples. It shows two adjacent facets, f0 and f1, together with their constituent fins and co-fins. You can see from the illustration that facets f0 and f1 are connected where fin e2 meets fin e3.</P>
<P>
<A NAME="50409902_pgfId-400950"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1229.gif">

<P>
<A NAME="50409902_pgfId-295813"></A>Figure 110-3 <A NAME="50409902_15165"></A>Finding adjacent facets by matching fins</P>

<H4>
<A NAME="50409902_pgfId-295817"></A>110.4.2.1 <A NAME="50409902_marker-295814"></A><A NAME="50409902_marker-295815"></A><A NAME="50409902_marker-295816"></A>When does co-fin matching occur? </H4>
<P>
<A NAME="50409902_pgfId-295821"></A>The -1 co-fin values in <A HREF="fd_chap.111.html#50409902_15165"><EM>
Figure 110-3</EM></A> indicate that there is no matching co-fin for the corresponding fin. In certain circumstances, <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> cannot return a matching co-fin, but when can this happen, and what is returned instead?</P>
<P>
<A NAME="50409902_pgfId-295822"></A>Fins that lie within a facet mesh boundary - <STRONG>
interior fins</STRONG> - always have an associated co-fin, connecting the same vertices as the first fin but in the opposite direction.</P>
<P>
<A NAME="50409902_pgfId-295823"></A>Fins that lie on a facet mesh boundary - <STRONG>
exterior fins</STRONG> - may or may not have an associated co-fin, depending on what you are faceting, and what options you have specified for the facet mesh:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-295824"></A>If topology matching is used (<CODE>
match</CODE>
 is <A HREF=../headers/pk_facet_match_t.html>PK_facet_match_topol_c</A>), exterior fins from adjacent facet meshes in different model faces are coincident, and so they are matched to each other, as shown in <A HREF="fd_chap.111.html#50409902_50723"><EM>
Figure 110-4</EM></A> (a). This is the default behaviour.</LI>
<LI>
<A NAME="50409902_pgfId-295828"></A>If geometry or trimmed matching is used (<CODE>
match</CODE>
 is either <A HREF=../headers/pk_facet_match_t.html>PK_facet_match_geom_c</A> or <A HREF=../headers/pk_facet_match_t.html>PK_facet_match_trimmed_c</A>), exterior fins from adjacent facet meshes in different model faces are not necessarily coincident, as shown in <A HREF="fd_chap.111.html#50409902_50723"><EM>
Figure 110-4</EM></A> (b). Because of this, the value -1 is returned for all exterior fins, though interior fins are still matched.</LI>
</UL>
<P>
<A NAME="50409902_pgfId-401111"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1230.gif">

<P>
<A NAME="50409902_pgfId-295876"></A>Figure 110-4 <A NAME="50409902_50723"></A>Co-fin matching behaviour across facet meshes created with (a) topology and (b) geometry matching</P>
<P>
<A NAME="50409902_pgfId-295877"></A>When faceting non-manifold bodies with topology matching switched on, co-fin matching occurs, such that a ring of fins is created around any non-manifold edge (that is, any edge with more than two model fins). <A HREF="fd_chap.111.html#50409902_45971"><EM>
Figure 110-5</EM></A> shows the <CODE>
fin_fin</CODE>
 table for a simple case in which three faces from different facet meshes meet at a non-manifold edge. The three co-fins e2, e3, and e6 form a ring such that each points to the next in sequence, with e6 pointing back to e2 to complete the ring. </P>
<P>
<A NAME="50409902_pgfId-401180"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1231.gif">

<P>
<A NAME="50409902_pgfId-296117"></A>Figure 110-5 <A NAME="50409902_45971"></A>Co-fin matching when faceting non-manifold bodies with topology matching</P>
<P>
<A NAME="50409902_pgfId-296121"></A>See <A HREF="fd_chap.109.html#50409900_40214">Section 108.2.2, “Match”</A> for information about the different facet matching options available when creating facet meshes.</P>
<P>
<A NAME="50409902_pgfId-296122"></A>The value -1 may also be returned in the following situations:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-296123"></A>If faces are faceted in isolation</LI>
<LI>
<A NAME="50409902_pgfId-296124"></A>If a sheet body with a laminar edge is faceted</LI>
</UL>
<P>
<A NAME="50409902_pgfId-296125"></A>The value -2 may occur in the <CODE>
fin_fin</CODE>
 table for one of two reasons:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-296126"></A>If faceting has failed on a neighboring face. When this happens, there is a entry in the <CODE>
error_object</CODE>
 table that corresponds to the failing face. See <A HREF="fd_chap.111.html#50409902_16396">Section 110.7, “Error information”</A> for more details.</LI>
<LI>
<A NAME="50409902_pgfId-296130"></A>If a co-fin was expected, but not found. Unlike -1 (where no co-fin was expected), a value of -2 indicates an error. When this happens, there is no corresponding entry in the <CODE>
error_object</CODE>
 table.</LI>
</UL>
<P>
<A NAME="50409902_pgfId-296131"></A>The value -3 may also be returned for a co-fin of a fin of a degenerate facet at a surface singularity when <CODE>
sing_topol</CODE>
 is set to <A HREF=../headers/pk_facet_sing_topol_t.html>PK_facet_sing_topol_degen_c</A>. See <A HREF="fd_chap.109.html#50409900_51772">Section 108.2.17, “Facet topology at singularities”</A> for more information on the <CODE>
sing_topol</CODE>
 option. </P>
<P>
<A NAME="50409902_pgfId-296135"></A>Your application should check explicitly for these values in the <CODE>
fin_fin</CODE>
 table. </P>
<P>
<A NAME="50409902_pgfId-296136"></A>In all cases, you should handle any exceptions as if the fin has no associated co-fin.</P>
<P>
<A NAME="50409902_pgfId-296137"></A>The following code fragment demonstrates a test for whether a fin has a co-fin.</P>
<P>
<A NAME="50409902_pgfId-296146"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-296140"></A>int co_fin_num = table-&gt;fin_fin.fin[fin_num];</P>
<P>
<A NAME="50409902_pgfId-296141"></A>if (co_fin_num != -1 &amp;&amp; </P>
<P>
<A NAME="50409902_pgfId-296142"></A>    co_fin_num != -2 &amp;&amp;</P>
<P>
<A NAME="50409902_pgfId-296143"></A>    co_fin_num != -3)</P>
<P>
<A NAME="50409902_pgfId-296144"></A>{</P>
<P>
<A NAME="50409902_pgfId-296145"></A>...</P>
</TD>
</TR>
</TABLE>



<H3>
<A NAME="50409902_pgfId-296150"></A>	110.4.3 	<A NAME="50409902_52575"></A><A NAME="50409902_marker-296148"></A><A NAME="50409902_marker-296149"></A>Facet strip information </H3>
<P>
<A NAME="50409902_pgfId-296151"></A><A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> creates tabular output in terms of facet strips whenever you request either the <CODE>
strip_boundary</CODE>
 or the <CODE>
strip_zigzag</CODE>
 tables. Between them, these tables contain all the information required to let you navigate the facet vertices in a given facet strip. </P>
<UL>
<LI>
<A NAME="50409902_pgfId-296152"></A>The <CODE>
strip_boundary</CODE>
 table describes the facet vertices in a facet strip, in the order that they can be found in the strip boundary.</LI>
<LI>
<A NAME="50409902_pgfId-296153"></A>The <CODE>
strip_zigzag</CODE>
 table describes the facet vertices in a facet strip, grouped such that they form a zig-zag pattern along the facet strip.</LI>
</UL>
<P>
<A NAME="50409902_pgfId-296154"></A>Both tables contain a series of connected fins that lie in a given facet strip, such that each fin in the table points to the next facet vertex in the series. Both tables are implemented as lookup tables that contain a single column of connected fins. </P>
<P>
<A NAME="50409902_pgfId-296158"></A><A HREF="fd_chap.111.html#50409902_51845"><EM>
Figure 110-6</EM></A> shows how the <CODE>
strip_boundary</CODE>
 table is constructed. The boundary of a facet strip always points anti-clockwise when viewed from above the strip, and the first two entries in the table are always guaranteed to lie in the same facet.</P>
<P>
<A NAME="50409902_pgfId-401252"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1232.gif">

<P>
<A NAME="50409902_pgfId-296377"></A>Figure 110-6 <A NAME="50409902_51845"></A>Describing the boundary of a facet strip</P>
<P>
<A NAME="50409902_pgfId-296378"></A>The <CODE>
strip_zigzag</CODE>
 table describes every facet vertex in the strip, listing them in zig-zag order from the start to the end of the facet. In order to include every facet vertex, and guarantee that every fin in the table is one that actually lies in the facet strip, strips of even and odd numbers of facets need to be handled slightly differently.</P>
<P>
<A NAME="50409902_pgfId-296382"></A><A HREF="fd_chap.111.html#50409902_38756"><EM>
Figure 110-7</EM></A> shows how the <CODE>
strip_zigzag</CODE>
 table is constructed for a facet strip that contains an odd number of facets. </P>
<P>
<A NAME="50409902_pgfId-408130"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1233.gif">

<P>
<A NAME="50409902_pgfId-408520"></A>Figure 110-7 <A NAME="50409902_38756"></A>Grouping facet vertices together in a zig-zag pattern: odd number of facets</P>
<P>
<A NAME="50409902_pgfId-408524"></A><A HREF="fd_chap.111.html#50409902_35208"><EM>
Figure 110-8</EM></A> shows how the <CODE>
strip_zigzag</CODE>
 table is constructed for a facet strip that contains an even number of facets. The last entry in this table is somewhat unintuitive. This is because each fin returned in the table must itself lie in the facet strip, and not on the other side of the facet strip. The only fin that satisfies this condition and points to the last vertex in the facet strip is one which does not have as its tail vertex the head vertex of the previous fin in the table (e15 in this example).</P>
<P>
<A NAME="50409902_pgfId-401483"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1234.gif">

<P>
<A NAME="50409902_pgfId-296810"></A>Figure 110-8 <A NAME="50409902_35208"></A>Grouping facet vertices together in a zig-zag pattern: even number of facets</P>


<H3>
<A NAME="50409902_pgfId-296816"></A>	110.4.4 	<A NAME="50409902_81938"></A><A NAME="50409902_marker-296812"></A><A NAME="50409902_marker-296813"></A><A NAME="50409902_marker-296814"></A><A NAME="50409902_marker-296815"></A>Associating fins with facet geometry </H3>
<P>
<A NAME="50409902_pgfId-296817"></A>Any facet vertex in a facet mesh can have any of the following geometric data associated with it. </P>
<UL>
<LI>
<A NAME="50409902_pgfId-296818"></A>Points</LI>
<LI>
<A NAME="50409902_pgfId-296819"></A>Parameters</LI>
<LI>
<A NAME="50409902_pgfId-296820"></A>Normals</LI>
<LI>
<A NAME="50409902_pgfId-296821"></A>First and second derivatives</LI>
<LI>
<A NAME="50409902_pgfId-516335"></A>Principal directions and curvatures</LI>
</UL>
<P>
<A NAME="50409902_pgfId-296824"></A>You can return this information in tables of geometric data, as described in <A HREF="fd_chap.111.html#50409902_95805">Section 110.5, “Geometric information”</A>.</P>
<P>
<A NAME="50409902_pgfId-296826"></A>In order to use any geometric data, you also need to return tables that associate topological entities from the facet mesh with the facet geometry inherited from the original model. You do this as follows: </P>
<UL>
<LI>
<A NAME="50409902_pgfId-296827"></A>Return the <CODE>
fin_data</CODE>
 table: this associates each fin with a data container for the facet vertex at the head of the fin</LI>
<LI>
<A NAME="50409902_pgfId-296828"></A>Return one or more intermediate tables to point the data container to the appropriate geometric data. The intermediate table you need to use depends on what geometric data you are returning.</LI>
<LI>
<A NAME="50409902_pgfId-296829"></A>Return the tables of geometric data themselves.</LI>
</UL>
<P>
<A NAME="50409902_pgfId-410364"></A>This process is illustrated in <A HREF="fd_chap.111.html#50409902_88129"><EM>
Figure 110-9</EM></A>.</P>
<P>
<A NAME="50409902_pgfId-410401"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1235.gif">

<P>
<A NAME="50409902_pgfId-297130"></A>Figure 110-9 <A NAME="50409902_88129"></A>Using data containers to associate facet topology with facet geometry</P>
<P>
<A NAME="50409902_pgfId-297131"></A>The <CODE>
fin_data</CODE>
 table is implemented as an indexed table that maps fins onto data indices. </P>
<P>
<A NAME="50409902_pgfId-297132"></A>Each table is implemented as an indexed table whose values are indices that refer to entries in the corresponding geometric tables as shown.</P>
<P>
<A NAME="50409902_pgfId-297166"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297135"></A>Intermediate table</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297137"></A>Corresponding geometric table</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297139"></A><CODE>
data_point_idx</CODE>
 </P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297144"></A><CODE>
point_vec</CODE>
 (<A HREF="fd_chap.111.html#50409902_72832">Section 110.5.1</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297146"></A><CODE>
data_normal_idx</CODE>
 </P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297151"></A><CODE>
normal_vec</CODE>
 (<A HREF="fd_chap.111.html#50409902_45999">Section 110.5.2</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297153"></A><CODE>
data_param_idx</CODE>
 </P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297158"></A><CODE>
param_uv</CODE>
 (<A HREF="fd_chap.111.html#50409902_66162">Section 110.5.3</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297160"></A><CODE>
data_deriv_idx</CODE>
 </P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297165"></A><CODE>
deriv_dp</CODE>
/<CODE>
deriv_d2p</CODE>
 (<A HREF="fd_chap.111.html#50409902_55473">Section 110.5.4</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-513795"></A><CODE>
data_curv_idx</CODE>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-513797"></A><CODE>
curv_dirs</CODE>
 (<A HREF="fd_chap.111.html#50409902_73995">Section 110.5.5</A>)</P>
</TD>
</TR>
</TABLE>

<H4>
<A NAME="50409902_pgfId-297172"></A>110.4.4.1 <A NAME="50409902_marker-297167"></A><A NAME="50409902_marker-297168"></A><A NAME="50409902_marker-297169"></A><A NAME="50409902_marker-297170"></A><A NAME="50409902_marker-297171"></A>Example </H4>
<P>
<A NAME="50409902_pgfId-297173"></A>The following example shows how topological information from the facet representation of a sheet body can be associated with geometric information inherited from that body.</P>
<P>
<A NAME="50409902_pgfId-297177"></A>First, <A HREF="fd_chap.111.html#50409902_31291"><EM>
Figure 110-10</EM></A> illustrates the relationship between the fins in the facet mesh and data containers at the facet vertices. This information is returned in the <CODE>
fin_data</CODE>
 table. </P>
<P>
<A NAME="50409902_pgfId-401702"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1236.gif">

<P>
<A NAME="50409902_pgfId-297394"></A>Figure 110-10 <A NAME="50409902_31291"></A>Associating fins with data containers</P>
<P>
<A NAME="50409902_pgfId-297395"></A>All facet vertices have at least one data container. Some facet vertices have several (d0/d4, and d3/d6). This is because the geometric data associated with those facet vertices may be different. For example, the normal associated with fin e8 (on the forward-facing model face), is different to the normal associated with fin e3 (on the top-facing model face), even though both those fins point to the same facet vertex.</P>
<P>
<A NAME="50409902_pgfId-297399"></A><A HREF="fd_chap.111.html#50409902_26144"><EM>
Figure 110-11</EM></A> shows the contents of the corresponding <CODE>
data_normal_idx</CODE>
 table, which provides the association between each data container and the normals in the model. The indices of this table are the data containers, and the values in the table are themselves indices into the <CODE>
normal_vec</CODE>
 table, described in <A HREF="fd_chap.111.html#50409902_45999">Section 110.5.2, “Obtaining face normal information”</A>.</P>
<P>
<A NAME="50409902_pgfId-401773"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1237.gif">

<P>
<A NAME="50409902_pgfId-297575"></A>Figure 110-11 <A NAME="50409902_26144"></A>Associating data containers with normals</P>
<P>
<A NAME="50409902_pgfId-297579"></A><A HREF="fd_chap.111.html#50409902_54339"><EM>
Figure 110-12</EM></A>, by contrast, shows the contents of the corresponding <CODE>
data_point_idx</CODE>
 table, which provides the association between each data container and the points in the model. Again, the indices of this table are the data containers, and the values in the table are indices into the <CODE>
point_vec</CODE>
 table, described in <A HREF="fd_chap.111.html#50409902_72832">Section 110.5.1, “Obtaining coordinate information”</A>. What is different about this table is that some of the values are repeated, because the geometric data associated with some of the facet vertices (namely, those that are associated with more than one model face) is shared.</P>
<P>
<A NAME="50409902_pgfId-401863"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1238.gif">

<P>
<A NAME="50409902_pgfId-297747"></A>Figure 110-12 <A NAME="50409902_54339"></A>Associating data containers with points</P>



<H3>
<A NAME="50409902_pgfId-297752"></A>	110.4.5 	<A NAME="50409902_marker-297748"></A><A NAME="50409902_marker-297749"></A><A NAME="50409902_marker-297750"></A><A NAME="50409902_43768"></A>Options for outputting topological information </H3>
<P>
<A NAME="50409902_pgfId-297756"></A>Parasolid offers some control over the way that tables of topological data are returned by <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A>, using the following options: </P>
<P>
<A NAME="50409902_pgfId-297778"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297759"></A>Option</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297761"></A>Description</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50409902_pgfId-297763"></A>max_facets_per_strip</PRE>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297765"></A>Specifies the maximum number of facets that should be combined into a single facet strip. Default: 10000.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50409902_pgfId-297767"></A>split_strips</PRE>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297769"></A>Lets you split facet strips on periodic surfaces, so that no facet strip spans more than a single period on the surface. If you are applying texture maps to a facet representation, switching on this option can improve the results. Default: Do not split strips. </P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<PRE><A NAME="50409902_pgfId-297771"></A>consistent_parms</PRE>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297773"></A>Lets you treat the surface parameters of facet vertices (or facet strips) on a periodic surface in a consistent manner. </P>
<P>
<A NAME="50409902_pgfId-297776"></A>See <A HREF="fd_chap.111.html#50409902_99911">“Ensuring consistent parameterisation for facets on periodic surfaces”</A>, below. </P>
</TD>
</TR>
</TABLE>

<H4>
<A NAME="50409902_pgfId-297780"></A>110.4.5.1 <A NAME="50409902_99911"></A>Ensuring consistent parameterisation for facets on periodic surfaces </H4>
<P>
<A NAME="50409902_pgfId-297781"></A>When creating facets on periodic surfaces, no facet should span more than half a period. You can use the <CODE>
consistent_parms</CODE>
 option to ensure that facet vertices from the same facet have parameters returned that lie within half a period of each other. Switching on this option can make it easier to apply texture maps to a facet representation. </P>
<P>
<A NAME="50409902_pgfId-297782"></A>The <CODE>
consistent_parms</CODE>
 option takes the following values:</P>
<P>
<A NAME="50409902_pgfId-297802"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297785"></A>Value</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297787"></A>Description</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297789"></A><A HREF=../headers/pk_facet_consistent_parms_t.html>PK_facet_consistent_parms_fa_c</A></P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297791"></A>Ensure that the vertices in any given facet (or facet strip, if generating strips) on a periodic surface have consistent parameterisation information. This is done as follows:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-297792"></A>If the set of facets does not cover the whole period, create a unique surface parameter for each vertex by using the UV box of the face. </LI>
<LI>
<A NAME="50409902_pgfId-297793"></A>If the set of facets does cover the whole period, ensure that the surface parameters of each vertex lie within half a period of each other. </LI>
</UL>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297795"></A><A HREF=../headers/pk_facet_consistent_parms_t.html>PK_facet_consistent_parms_su_c</A></P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297797"></A>This value is supported for legacy code only: you should use <A HREF=../headers/pk_facet_consistent_parms_t.html>PK_facet_consistent_parms_fa_c</A> instead. This value ensures that the vertices in any given facet or facet strip on a periodic surface have surface parameters that lie within half a period of each other. </P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297799"></A><A HREF=../headers/pk_facet_consistent_parms_t.html>PK_facet_consistent_parms_no_c</A></P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-297801"></A>Do not ensure consistent parameterisation information for facets on periodic surfaces. This is the default. </P>
</TD>
</TR>
</TABLE>
<P>
<A NAME="50409902_pgfId-297803"></A>If facets are being output as strips each strip is composed of consistently parameterised triangular facets. All triplets of vertices within the strip have consistent surface parameters values. </P>
<P>
<A NAME="50409902_pgfId-297807"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<ADDRESS>
<A NAME="50409902_pgfId-297806"></A>Note: If the facet set spans a whole period then, depending on the other faceting options you have set, and on the properties of the model itself (e.g tolerance values), some facet vertices may still lie outside the first period. You need to handle such cases in your own application code. </ADDRESS><BR>
</TD>
</TR>
</TABLE>





<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50409902_pgfId-297812"></A>110.5	<A NAME="50409902_95805"></A><A NAME="50409902_marker-297809"></A><A NAME="50409902_marker-297810"></A><A NAME="50409902_marker-297811"></A>Geometric information 


</H1>
<P>
<A NAME="50409902_pgfId-297814"></A><A NAME="50409902_Faceting"></A>This section describes how you can return geometric data inherited from the original model using <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A>. Each of the tables described in this section is implemented as an indexed table, and you can associate the data from any table with the relevant facet topology by referring to its index in the value of the corresponding intermediate data table, as described in <A HREF="fd_chap.111.html#50409902_81938">Section 110.4.4, “Associating fins with facet geometry”</A>.</P>

<H3>
<A NAME="50409902_pgfId-297821"></A>	110.5.1 	<A NAME="50409902_72832"></A><A NAME="50409902_marker-297819"></A><A NAME="50409902_marker-297820"></A>Obtaining coordinate information </H3>
<P>
<A NAME="50409902_pgfId-297822"></A>You can return an array of all the coordinates that are available for a facet mesh in the <CODE>
point_vec</CODE>
 table. This lets you find the corresponding coordinate for any fin’s head in a facet mesh.</P>
<P>
<A NAME="50409902_pgfId-297823"></A>Obtaining the coordinates associated with a fin’s head involves the following steps:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-297824"></A>First, an index into the <CODE>
data_point_idx</CODE>
 table is obtained from the <CODE>
fin_data</CODE>
 table.</LI>
<LI>
<A NAME="50409902_pgfId-297825"></A>Using this index, an index into the <CODE>
point_vec</CODE>
 table is obtained from the <CODE>
data_point_idx</CODE>
 table. </LI>
<LI>
<A NAME="50409902_pgfId-297826"></A>Finally, the coordinate is obtained from the <CODE>
point_vec</CODE>
 table.</LI>
</UL>


<H3>
<A NAME="50409902_pgfId-297831"></A>	110.5.2 	<A NAME="50409902_45999"></A><A NAME="50409902_marker-516745"></A><A NAME="50409902_marker-516746"></A><A NAME="50409902_marker-516747"></A>Obtaining face normal information </H3>
<P>
<A NAME="50409902_pgfId-297832"></A>You can return an array of all the normals that are available for a facet mesh in the <CODE>
normal_vec</CODE>
 table. This lets you find the corresponding normal for any fin’s head in a facet mesh.</P>
<P>
<A NAME="50409902_pgfId-297833"></A>Obtaining the normals associated with a fin’s head involves the following steps:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-297834"></A>First, an index into the <CODE>
data_normal_idx</CODE>
 table is obtained from the <CODE>
fin_data</CODE>
 table.</LI>
<LI>
<A NAME="50409902_pgfId-297835"></A>Using this index, an index into the <CODE>
normal_vec</CODE>
 table is obtained from the <CODE>
data_normal_idx</CODE>
 table. </LI>
<LI>
<A NAME="50409902_pgfId-297836"></A>Finally, the normal is obtained from the <CODE>
normal_vec</CODE>
 table.</LI>
</UL>
<P>
<A NAME="50409902_pgfId-297837"></A>Face normal values are returned as normalized vectors, pointing away from the originating face.</P>
<P>
<A NAME="50409902_pgfId-297838"></A>If the face normal cannot be calculated, a zero vector is returned. This event is rare but you should still test for it.</P>


<H3>
<A NAME="50409902_pgfId-297843"></A>	110.5.3 	<A NAME="50409902_66162"></A><A NAME="50409902_marker-516779"></A><A NAME="50409902_marker-516780"></A><A NAME="50409902_marker-516781"></A>Obtaining surface parameter information </H3>
<P>
<A NAME="50409902_pgfId-297844"></A>You can return an array of all the surface parameters that are available for a facet mesh in the <CODE>
param_uv</CODE>
 table. This lets you find the corresponding surface parameters for any fin’s head in a facet mesh.</P>
<P>
<A NAME="50409902_pgfId-297845"></A>Obtaining the surface parameters associated with a fin’s head involves the following steps:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-297846"></A>First, an index into the <CODE>
data_param_idx</CODE>
 table is obtained from the <CODE>
fin_data</CODE>
 table.</LI>
<LI>
<A NAME="50409902_pgfId-297847"></A>Using this index, an index into the <CODE>
param_uv</CODE>
 table is obtained from the <CODE>
data_param_idx</CODE>
 table. </LI>
<LI>
<A NAME="50409902_pgfId-297848"></A>Finally, the parameter is obtained from the <CODE>
param_uv</CODE>
 table.</LI>
</UL>


<H3>
<A NAME="50409902_pgfId-297852"></A>	110.5.4 	<A NAME="50409902_55473"></A><A NAME="50409902_marker-297850"></A><A NAME="50409902_marker-297851"></A>Obtaining derivative information </H3>
<P>
<A NAME="50409902_pgfId-297853"></A>You can return an array of all the first or second order derivatives that are available for a facet mesh in the <CODE>
deriv_dp</CODE>
 or <CODE>
deriv_d2p</CODE>
 tables. These let you find the corresponding derivatives for any fin’s head in a facet mesh.</P>
<P>
<A NAME="50409902_pgfId-297854"></A>Obtaining the derivatives associated with a fin’s head involves the following steps:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-297855"></A>First, an index into the <CODE>
data_deriv_idx</CODE>
 table is obtained from the <CODE>
fin_data</CODE>
 table.</LI>
<LI>
<A NAME="50409902_pgfId-297856"></A>Using this index, an index into either the <CODE>
deriv_dp</CODE>
 or <CODE>
deriv_d2p</CODE>
 tables is obtained from the <CODE>
data_deriv_idx</CODE>
 table. </LI>
<LI>
<A NAME="50409902_pgfId-297857"></A>Finally, the appropriate derivative is obtained from either the <CODE>
deriv_dp</CODE>
 or <CODE>
deriv_d2p</CODE>
 tables.</LI>
</UL>


<H3>
<A NAME="50409902_pgfId-513845"></A>	110.5.5 	<A NAME="50409902_73995"></A>Obtaining face curvature information </H3>
<P>
<A NAME="50409902_pgfId-514172"></A>You can return an array of all the principal directions and curvatures of the face that are available for a facet mesh in the <CODE>
curv_dirs</CODE>
 table. This let you find the corresponding face curvatures for any fin’s head in a facet mesh.</P>
<P>
<A NAME="50409902_pgfId-514173"></A>Obtaining the curvature information associated with a fin’s head involves the following steps:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-514174"></A>First, an index into the <CODE>
data_curv_idx</CODE>
 table is obtained from the <CODE>
fin_data</CODE>
 table.</LI>
<LI>
<A NAME="50409902_pgfId-514175"></A>Using this index, an index into the <CODE>
curv_dirs</CODE>
 table is obtained from the <CODE>
data_curv_idx</CODE>
 table. </LI>
<LI>
<A NAME="50409902_pgfId-513946"></A>Finally, the principal directions and curvatures are obtained from the <CODE>
curv_dirs</CODE>
 table.</LI>
</UL>
<P>
<A NAME="50409902_pgfId-519356"></A>If the face curvature cannot be calculated, for example at a singularity, the principal directions are returned as zero vectors and the principal curvatures are returned as zero. </P>




<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50409902_pgfId-297862"></A>110.6	<A NAME="50409902_52346"></A><A NAME="50409902_marker-521568"></A><A NAME="50409902_marker-521569"></A><A NAME="50409902_marker-521570"></A>Tracking information 


</H1>
<P>
<A NAME="50409902_pgfId-297863"></A><A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> also returns tables that contain tracking information, associating facets, facet strips, and fins with the original model faces and edges that they were based on. You can return tables that associate:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-297867"></A>Facets with model faces. See <A HREF="fd_chap.111.html#50409902_57466">Section 110.6.1</A>.</LI>
<LI>
<A NAME="50409902_pgfId-297871"></A>Facet strips with model faces. See <A HREF="fd_chap.111.html#50409902_67846">Section 110.6.2</A>.</LI>
<LI>
<A NAME="50409902_pgfId-297875"></A>Exterior fins with model edges. See <A HREF="fd_chap.111.html#50409902_70600">Section 110.6.3</A>.</LI>
<LI>
<A NAME="50409902_pgfId-297879"></A>Facet point to topology. See <A HREF="fd_chap.111.html#50409902_48850">Section 110.6.4</A>.</LI>
<LI>
<A NAME="50409902_pgfId-297883"></A>Facet fins with model topology. See <A HREF="fd_chap.111.html#50409902_46623">Section 110.6.5</A>.</LI>
</UL>

<H3>
<A NAME="50409902_pgfId-297888"></A>	110.6.1 	<A NAME="50409902_57466"></A><A NAME="50409902_marker-297885"></A><A NAME="50409902_marker-297886"></A><A NAME="50409902_marker-297887"></A>Mapping facets to faces </H3>
<P>
<A NAME="50409902_pgfId-297889"></A>The <CODE>
facet_face</CODE>
 table maps each facet in a facet mesh onto the model face that it forms part of the representation for. It is implemented as an indexed table in which each index points to a facet, and the values point to the originating model faces. Sets of facets derived from the same face are grouped together.</P>
<P>
<A NAME="50409902_pgfId-297893"></A><A HREF="fd_chap.111.html#50409902_25232"><EM>
Figure 110-13</EM></A> shows the <CODE>
facet_face</CODE>
 table for a sheet body containing two faces, each of which contains two facets.</P>
<P>
<A NAME="50409902_pgfId-401931"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1239.gif">

<P>
<A NAME="50409902_pgfId-298002"></A>Figure 110-13 <A NAME="50409902_25232"></A>Associating facets with originating model faces</P>


<H3>
<A NAME="50409902_pgfId-298007"></A>	110.6.2 	<A NAME="50409902_67846"></A><A NAME="50409902_marker-298004"></A><A NAME="50409902_marker-298005"></A><A NAME="50409902_marker-298006"></A>Mapping facet strips to faces </H3>
<P>
<A NAME="50409902_pgfId-298008"></A>If you have requested that facet strips are output, the <CODE>
strip_face</CODE>
 table maps each facet strip in a facet mesh onto the model face that it forms part of the representation for. It is implemented as an indexed table in which the index points to a facet strip, and the value points to the originating model face. Sets of strips derived from the same face are grouped together.</P>
<P>
<A NAME="50409902_pgfId-298012"></A><A HREF="fd_chap.111.html#50409902_73631"><EM>
Figure 110-14</EM></A> shows the <CODE>
strip_face</CODE>
 table for a body containing two faces, each of which contains a number of facet strips. </P>
<P>
<A NAME="50409902_pgfId-402043"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1240.gif">

<P>
<A NAME="50409902_pgfId-298459"></A>Figure 110-14 <A NAME="50409902_73631"></A>Associating facet strips with originating model faces</P>


<H3>
<A NAME="50409902_pgfId-298465"></A>	110.6.3 	<A NAME="50409902_70600"></A><A NAME="50409902_marker-298461"></A><A NAME="50409902_marker-298462"></A><A NAME="50409902_marker-298463"></A><A NAME="50409902_marker-298464"></A>Mapping fins to edges </H3>
<P>
<A NAME="50409902_pgfId-298466"></A>The <CODE>
fin_edge</CODE>
 table maps each fin in a facet mesh that is associated with an edge in the original model to that model edge. This table is implemented as a two-column lookup table:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-298467"></A>The first column contains the fin.</LI>
<LI>
<A NAME="50409902_pgfId-298468"></A>The second column contains its originating model edge. </LI>
</UL>
<P>
<A NAME="50409902_pgfId-298469"></A>The table does not contain any fins that do not have associated edges in the original model.</P>
<P>
<A NAME="50409902_pgfId-298470"></A>The <CODE>
fin_edge</CODE>
 table is returned unsorted, which means that a set of fins associated with a specific edge may not appear in contiguous positions in the table. </P>
<P>
<A NAME="50409902_pgfId-413797"></A><A HREF="fd_chap.111.html#50409902_18063"><EM>
Figure 110-15</EM></A> shows the <CODE>
fin_edge</CODE>
 table for the sheet body used in earlier examples. Notice that interior fins (e1, e5, e8, and e9) do not appear in the table at all.</P>
<P>
<A NAME="50409902_pgfId-413828"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1241.gif">

<P>
<A NAME="50409902_pgfId-298661"></A>Figure 110-15 <A NAME="50409902_18063"></A>Associating fins with originating model edges</P>


<H3>
<A NAME="50409902_pgfId-298663"></A>	110.6.4 	<A NAME="50409902_48850"></A>Mapping facet points to topology </H3>
<P>
<A NAME="50409902_pgfId-298664"></A>The <CODE>
point_topol</CODE>
 table maps each facet point on a face boundary to the associated vertex, edge, or fin in the original model, as follows:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-298665"></A>If a facet point corresponds to a model vertex, then the vertex is returned.</LI>
<LI>
<A NAME="50409902_pgfId-298666"></A>Otherwise, the model edge that the facet point lies on is returned, if that edge is accurate. </LI>
<LI>
<A NAME="50409902_pgfId-298667"></A>If the model edge is tolerant, then one of the edge’s fins is returned. </LI>
</UL>
<P>
<A NAME="50409902_pgfId-298671"></A>For example, <A HREF="fd_chap.111.html#50409902_36334"><EM>
Figure 110-16</EM></A> shows the facet mesh for a model face that contains a tolerant edge. In the <CODE>
point_topol</CODE>
 table, facet points that lie at the corners are associated with vertices, and other facet points are associated with edges. The one exception is the facet point on the tolerant edge; this is associated with the fin whose SP-curve was used in the discretisation of the edge. </P>
<P>
<A NAME="50409902_pgfId-298675"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1242.gif">

<P>
<A NAME="50409902_pgfId-298677"></A>Figure 110-16 <A NAME="50409902_36334"></A>Associating boundary facet points with model topology</P>
<P>
<A NAME="50409902_pgfId-298678"></A>In certain cases, the facet topology may not agree with the topology of the original model. In particular, if the original model has faces that contain spikes, these spikes may be zipped up in the resulting faceted representation. <A HREF="fd_chap.111.html#50409902_25175"><EM>
Figure 110-17</EM></A> shows an example in which a model face contains a spike. In the resulting faceted representation, this spike has been zipped up, resulting in differences between the model topology and the facet topology:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-298682"></A>In the original model, three faces meet at vertex V1. However, at the corresponding facet vertex, only two faces meet. </LI>
<LI>
<A NAME="50409902_pgfId-298683"></A>In the original model, faces F1 and F3 meet at a point. However, in the facet model, there are facet edges between them.</LI>
</UL>
<P>
<A NAME="50409902_pgfId-298684"></A>In such cases, facet points on the facet representation are associated with the “dominant” edge of the spike (if the edge is accurate) or the “dominant” fin (if the edge is tolerant). In this context, “dominant” refers to the edge whose position stays the same when the spike is zipped up: the other edge is “pulled towards” the dominant edge in order to zip up the spike in the facet representation. </P>
<P>
<A NAME="50409902_pgfId-298688"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1243.gif">

<P>
<A NAME="50409902_pgfId-298690"></A>Figure 110-17 <A NAME="50409902_25175"></A>Changes to topology when zipping up spikes in faces</P>


<H3>
<A NAME="50409902_pgfId-298692"></A>	110.6.5 	<A NAME="50409902_46623"></A>Mapping facet fins to model topology </H3>
<P>
<A NAME="50409902_pgfId-298693"></A>The <CODE>
fin_topol</CODE>
 table maps facet fins on face boundaries to their original model topology. For example,<A HREF="fd_chap.111.html#50409902_24368"><EM>
Figure 110-18</EM></A> shows the facet mesh for a model face. If the edges are accurate, <CODE>
fin_topol</CODE>
 returns mappings between facet fins and the associated model edges. If the edges are tolerant, the mappings are between facet fins and the associated model edge fins. This mapping is a sparse relationship therefore only the fins that lie on the face boundaries are returned for the facet fin.</P>
<P>
<A NAME="50409902_pgfId-298700"></A>&nbsp;</P>

<IMG SRC="../graphics/fd_chap-1244.gif">

<P>
<A NAME="50409902_pgfId-298702"></A>Figure 110-18 <A NAME="50409902_24368"></A>Associating boundary facet fins with model topology</P>
<P>
<A NAME="50409902_pgfId-442092"></A>As is the case with the <CODE>
point_topol</CODE>
 table (described in <A HREF="fd_chap.111.html#50409902_48850" CLASS="XRef">Section 110.6.4, “Mapping facet points to topology”</A>), there can be cases where the facet topology does not agree with the topology of the original model. In particular, spikes in the original model may be zipped up in the resulting faceted representation, as shown in <A HREF="fd_chap.111.html#50409902_25175"><EM>
Figure 110-17</EM></A>. As with the <CODE>
point_topol</CODE>
 table, in these cases, facet fins in the facet representation are associated with the “dominant” edge of the spike (if the edge is accurate) or the “dominant” fin (if the edge is tolerant).</P>
<P>
<A NAME="50409902_pgfId-298703"></A>In cases where <CODE>
sing_topol</CODE>
 is switched on and a degenerate facet fin is present at the singularity along with a model vertex, a vertex is returned. This is the only time a vertex is returned in the <CODE>
fin_topol</CODE>
 table. If there is no model vertex present at the singularity, the table will not return anything.</P>




<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<HR>

<H1>
<A NAME="50409902_pgfId-298708"></A>110.7	<A NAME="50409902_16396"></A><A NAME="50409902_marker-298705"></A><A NAME="50409902_marker-298706"></A><A NAME="50409902_marker-298707"></A>Error information 


</H1>
<P>
<A NAME="50409902_pgfId-298709"></A>Error information is returned by <A HREF=../headers/pk_topol_facet_2.html>PK_TOPOL_facet_2</A> using the <CODE>
error_object</CODE>
 table. This table indicates whether any faults were detected during faceting, and where they occurred. The table is implemented as a two-column lookup table:</P>
<UL>
<LI>
<A NAME="50409902_pgfId-298710"></A>The first column contains a token of type <A HREF=../headers/pk_facet_fault_t.html>PK_facet_fault_t</A></LI>
<LI>
<A NAME="50409902_pgfId-298711"></A>The second column contains either the integer value of the body or face entity at fault, or the index of the facet, facet strip, or data container at fault.</LI>
</UL>
<P>
<A NAME="50409902_pgfId-424086"></A>You can use the <CODE>
report_pts_off_topol</CODE>
 option to control whether points that lie off the model topology are reported in the <CODE>
error_object</CODE>
 table. This takes the following values:</P>
<P>
<A NAME="50409902_pgfId-424267"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-424277"></A>Value</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-424279"></A>Description</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-424281"></A><A HREF=../headers/pk_facet_pt_report_t.html>PK_facet_pt_report_no_c</A></P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-424283"></A>No report is generated. (Default)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-424285"></A><A HREF=../headers/pk_facet_pt_report_t.html>PK_facet_pt_report_off_eds_c</A></P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-424287"></A>Report facet points that are associated with a model edge but whose position does not lie on the geometry of that model edge or one of its fins.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-424289"></A><A HREF=../headers/pk_facet_pt_report_t.html>PK_facet_pt_report_off_tpl_c</A></P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
<A NAME="50409902_pgfId-431339"></A>Report facet points as per <A HREF=../headers/pk_facet_pt_report_t.html>PK_facet_pt_report_off_eds_c</A>, and any internal facet points (i.e. facet points that are not associated with edges or vertices) that lie off model faces.</P>
</TD>
</TR>
</TABLE>
<P>
<A NAME="50409902_pgfId-426975"></A>For model faces, a facet point is deemed to lie off the face if it does not lie on the surface of the face. The face is considered as being bounded by the facet fins corresponding to its edges.</P>
<P>
<A NAME="50409902_pgfId-426976"></A>For tolerant model edges, a facet point is deemed to lie off the edge if it does not lie on the SP-curve of the fin which was used in the discretisation of the edge. Note that such points could still lie within the tolerance tube of the model edge itself, and so could still be considered to lie on the edge by some applications. </P>
<P>
<A NAME="50409902_pgfId-298725"></A>&nbsp;</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<ADDRESS>
<A NAME="50409902_pgfId-298716"></A>Note: If you set <CODE>
report_pts_off_topol</CODE>
 to report points not on model edges or faces, you must also ensure that the following options are set as shown:</ADDRESS><BR>
<UL>
<LI>
<A NAME="50409902_pgfId-298720"></A><CODE>
quality</CODE>
 must be <A HREF=../headers/pk_facet_quality_t.html>PK_facet_quality_improved_c</A>. See <A HREF="fd_chap.109.html#50409900_16434">Section 108.2.15</A>. </LI>
<LI>
<A NAME="50409902_pgfId-298724"></A><CODE>
match</CODE>
 must be <A HREF=../headers/pk_facet_match_t.html>PK_facet_match_topol_c</A>. See <A HREF="fd_chap.109.html#50409900_40214">Section 108.2.2</A>. </LI>
</UL>
</TD>
</TR>
</TABLE>
<P>
<A NAME="50409902_pgfId-298726"></A>You can find a complete list of the categories of faceting faults that can be detected in the documentation for <A HREF=../headers/pk_topol_fctab_error_object_t.html>PK_TOPOL_fctab_error_object_t</A> in the<EM>
<A HREF=../pk_index.html>PK Interface Programming Reference</A> Manual</EM>. </P>

<A NAME="endofdoc"></A>

<P ALIGN=RIGHT>
<A HREF="#topofdoc"><I>[back to top]</I></A>
</P>

<P></P><TABLE BORDER ALIGN=CENTER><TR>
  <TD>&lt;&lt;&lt; <A HREF="fd_chap.110.html">Faceting Output Via GO </A></TD>
  <TD><A HREF="../fd_index.html">Chapters</A></TD>
  <TD><A HREF="fd_chap.112.html">Parasolid View Matrices</A> &gt;&gt;&gt;</TD>
</TR></TABLE>

</BODY>
</HTML>
