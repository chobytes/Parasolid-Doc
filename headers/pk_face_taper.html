<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<TITLE>PK_FACE_taper</TITLE>
<LINK rel="stylesheet" href="../ps_doc.css">
</HEAD>
<BODY bgcolor="#ffffff" link="#0F3A68" vlink="#878787" alink="#FF7600" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" background="../images/background.gif">
<A NAME="topofdoc"></A>

<TABLE cellpadding=0 cellspacing=0 border=0 width=100%>
  <TR>
    <TD>&nbsp;<IMG src="../graphics/psbar_l.gif" border=0></TD>
    <TD align=RIGHT valign=CENTER>
        <FONT face="helvetica,arial" SIZE=5 class=NS28pt>
        <B>PK_FACE_taper</B></FONT></TD>
    <TD>&nbsp;&nbsp;</TD>
  </TR>
</TABLE>

<A NAME="endofcontents"></A>
<PRE>

<A NAME="declaration"></A><B><A HREF=../headers/pk_error_code_t.html>PK_ERROR_code_t</A>           PK_FACE_taper
(
<I>--- received arguments ---
</I>int                       n_faces,        --- number of target faces (&gt;0)
const <A HREF=../headers/pk_face_t.html>PK_FACE_t</A>           faces[],        --- faces to be drafted
const <A HREF=../headers/pk_entity_t.html>PK_ENTITY_t</A>         references[],   --- reference entities
<A HREF=../headers/pk_vector1_t.html>PK_VECTOR1_t</A>              direction,      --- taper direction
double                    angle,          --- taper angle
double                    tolerance,      --- max. tol. for applying surfaces
const <A HREF=../headers/pk_face_taper_o_t.html>PK_FACE_taper_o_t</A>  *options,        --- options [PF]

<I>--- returned arguments ---
</I><A HREF=../headers/pk_topol_track_r_t.html>PK_TOPOL_track_r_t</A> *const tracking,       --- tracking information
<A HREF=../headers/pk_topol_local_r_t.html>PK_TOPOL_local_r_t</A> *const results         --- status information
)
</B>
<A NAME="description"></A>
<I>This function applies tapering to the given <B>'faces'</B> by replacing their
geometry with taper surfaces.

NOTE : This function supersedes <A HREF=../headers/pk_face_install_surfs_isocline.html>PK_FACE_install_surfs_isocline</A>.

This function offers partial support for facet geometry [PF]
</I>
<A NAME="errors"></A>
<B>Specific Errors:</B>
    PK_ERROR_wrong_entity_in_array  (MILD)    Given faces are not from same
                                              body.
    PK_ERROR_bad_angle              (MILD)    Inconsistent specification of
                                              taper angles.
    PK_ERROR_unsuitable_topology    (MILD)    Laminar reference edge(s) for
                                              normal method taper.
                                              Parting body is not sheet.
    PK_ERROR_bad_combination        (MILD)    Option <B>'parting_edges'</B> specified
                                              without also specifying
                                              <B>'parting_body'</B>.
                                              Option <B>'parting_body'</B> specified
                                              without also specifying
                                              <B>'parting_edges'</B>.
                                              Some entries of <B>'parting_edges'</B>
                                              also in <B>'tapered_edges'</B> or
                                              <B>'normal_edges'</B>.
                                              A parting edge has the same taper
                                              face on both sides.
                                              A parting edge is laminar.
                                              A combination of facet and
                                              classic geometry has been
                                              supplied.
    PK_ERROR_non_manifold           (SERIOUS) <B>'faces'</B> are not locally manifold
    PK_ERROR_failed_to_taper        (SERIOUS) Taper operation failed

<A NAME="documentation"></A>
See also <A HREF="../chapters/fd_chap.068.html#50409854_pgfId-690982">here</A> for more information.

Introduction
Taper (or isocline) surfaces are specified by a <B>'direction'</B> and an <B>'angle'</B>.
For each face in <B>'faces'</B> a taper surface is defined by a <B>'reference'</B>
entity.

The reference entity may be of classes:

   o PK_CLASS_edge: A taper surface is defined through the curve of the
     edge between the vertices of the edge (if it has any).

   o PK_CLASS_face: The taper surface(s) to be used for the face in
     <B>'faces'</B> is to be that (those) defined for this <B>'reference'</B> face.

   o PK_CLASS_surf: A taper surface is defined through the curve of
     intersection between the face's surface and the reference surface.
     A reference surface can also be used in association with step reference
     edges to produce step tapering. See <A HREF="../chapters/fd_chap.068.html#50409854_pgfId-297097">here</A> for more information.

See <A HREF="../chapters/fd_chap.068.html#50409854_pgfId-294751">here</A> for more information.

A face may appear more than once in <B>'faces'</B>.  The effect of this is that
the face will be split so as to satisfy the separate constraints.

In the case of Step Tapering, no face-splitting occurs; the step reference
edges which lie on the reference surface will produce no step faces,
the other face-related step reference edges will each produce a step face.
The step reference edges are passed in through the controls in the options
structure.
There are two types of step reference edges, the <B>'tapered'</B> edges and
the <B>'normal'</B> edges :
   o <B>'tapered'</B> edges produce step faces tapered at an angle which is greater
     or equal to the specified taper angle (they therefore satisfy the taper
     condition).
   o <B>'normal'</B> edges produce step faces normal (perpendicular) to the original
     relevant taper face (they do not necessarily satisfy the taper condition).

If a face appears in <B>'references'</B> then it must also appear in <B>'faces'</B>.

The function may, at times, have to use approximate geometry.
For such cases, <B>'tolerance'</B> specifies an upper bound on the distance by which
a point on the actual geometry may deviate from its ideal position.
While the function will usually satisfy this constraint, it is not guaranteed.

The faces can belong to a general body, so long as they are locally manifold.
The taper cannot cause the faces to clash with non-manifold regions of the
body.

User options
The <A HREF=../headers/pk_face_taper_o_t.html>PK_FACE_taper_o_t</A> structure contains user control options. See its
documentation for details.

Tracking
The <A HREF=../headers/pk_topol_track_t.html>PK_TOPOL_track_t</A> structure contains topology tracking information on
the operation. In the case of this function, two types of tracking information
records may be returned :
1)  PK_TOPOL_track_create_c, to report newly created tapered faces (or faces
    deriving from them). These new faces will have the relevant initial taper
    face and eventually the relevant reference edge as original topologies.
    In a step taper context, the step faces will also be reported
    in records of this type.See <A HREF="../chapters/fd_chap.068.html#50409854_pgfId-297097">here</A> for more information.
2)  PK_TOPOL_track_derive_c, to report faces deriving from existing ones,
    through any combination of splitting and merging.

Error handling
If this function returns PK_ERROR_no_errors, the result of the operation
will be indicated by the value of the <B>'status'</B> field of the <B>'results'</B>
structure. When this value is not <A HREF=../headers/pk_local_status_t.html>PK_local_status_ok_c</A> or
<A HREF=../headers/pk_local_status_t.html>PK_local_status_nocheck_c</A>, it indicates an operation failure and an array
of entities involved in this failure is returned through the field
<B>'error_entities'</B> of the <B>'results'</B> structure, when possible.
For more information regarding the failure status code and the error_entities,
refer to the PK documentation of the <A HREF=../headers/pk_topol_local_r_t.html>PK_TOPOL_local_r_t</A> structure.

</PRE>

<SCRIPT type="text/JavaScript" language="JavaScript">
<!-- 
// Change date to a readable format
function to_utc(date)
{var utc = date.toUTCString();return utc;}

// get last modified date of the current document.
function date_lastmodified()
{var mod = document.lastModified, s = "Unknown", d1;
 if(0 != (d1=Date.parse(mod)))
  {s = to_utc(new Date(d1));}
 return s;}	
// display the last modified date
document.write("<ADDRESS>Generated on: " + date_lastmodified() + "</ADDRESS>");
// -->
</SCRIPT>
</BODY>
</HTML>
