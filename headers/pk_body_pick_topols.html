<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<TITLE>PK_BODY_pick_topols</TITLE>
<LINK rel="stylesheet" href="../ps_doc.css">
</HEAD>
<BODY bgcolor="#ffffff" link="#0F3A68" vlink="#878787" alink="#FF7600" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" background="../images/background.gif">
<A NAME="topofdoc"></A>

<TABLE cellpadding=0 cellspacing=0 border=0 width=100%>
  <TR>
    <TD>&nbsp;<IMG src="../graphics/psbar_l.gif" border=0></TD>
    <TD align=RIGHT valign=CENTER>
        <FONT face="helvetica,arial" SIZE=5 class=NS28pt>
        <B>PK_BODY_pick_topols</B></FONT></TD>
    <TD>&nbsp;&nbsp;</TD>
  </TR>
</TABLE>

<A NAME="endofcontents"></A>
<PRE>

<A NAME="declaration"></A><B><A HREF=../headers/pk_error_code_t.html>PK_ERROR_code_t</A>                 PK_BODY_pick_topols
(
<I>--- received arguments ---
</I>const int                       n_bodies,       --- number of bodies
const <A HREF=../headers/pk_part_t.html>PK_PART_t</A>                 bodies[],       --- body array
const <A HREF=../headers/pk_transf_t.html>PK_TRANSF_t</A>              *body_transfs,   --- transformations
const <A HREF=../headers/pk_axis1_sf_t.html>PK_AXIS1_sf_t</A>            *ray,            --- picking ray
const <A HREF=../headers/pk_body_pick_topols_o_t.html>PK_BODY_pick_topols_o_t</A>  *options,        --- control options

<I>--- returned arguments ---
</I><A HREF=../headers/pk_body_pick_topols_r_t.html>PK_BODY_pick_topols_r_t</A>  *const picked          --- picked entities
)
</B>
<A NAME="description"></A>
<I>Pick entities from an array of body instances by their proximity to a line
</I>
<A NAME="errors"></A>
<B>Specific Errors:</B>

    PK_ERROR_null_direction         (MILD) near and far points are identical
    PK_ERROR_wrong_direction        (MILD) near and far points are reversed
    PK_ERROR_bad_combination        (MILD) bad combination of options
    PK_ERROR_bad_component          (MILD) <B>'body_transfs'</B> contains a transform
                                    with non-uniform scaling, shearing
                                    or perspective terms
    PK_ERROR_duplicate_array_item   (MILD) body array contains duplicate bodies
                                    but <B>'body_transfs'</B> is null
    PK_ERROR_topol_not_from_body    (MILD) <B>'topols_to_pick_from'</B> contains a
                                    topology not from <B>'bodies'</B>, or not from the
                                    correct body if <B>'body_transfs'</B> is not null
    PK_ERROR_not_implemented        (MILD) <B>'topols_to_pick_from'</B> contains a
                                    topology other than a face or body

<A NAME="documentation"></A>

Overview
This function picks faces, edges, vertices and frames from an array of
instanced bodies using a straight line ray. Faces are picked if they are
intersected by the ray. Edges and vertices are picked if they lie within a
specified distance of the ray. Frames are picked if their owning regions are
intersected by the ray.


Body Instances
If the <B>'body_transfs'</B> argument is NULL, the ray is compared directly with
each of the <B>'n_bodies'</B> bodies. The bodies array must not contain duplicates.

If the <B>'body_transfs'</B> argument is not NULL, it refers to an array of <B>'n_bodies'</B>
<A HREF=../headers/pk_transf_t.html>PK_TRANSF_t</A> entities. The ray is compared with the <B>'n_bodies'</B> bodies, with each
transformed by the corresponding entry in <B>'body_transfs'</B>. The bodies array may
contain duplicates. Instancing transforms may contain translation, reflection,
rotation and uniform scaling, but not non-uniform scaling, shearing or
perspective terms. If an instance does not need to be transformed, its
<B>'body_transfs'</B> entry can be set to PK_ENTITY_null.


Options
The options structure defines which types of entity are picked, the maximum
distance allowed between an entity and the ray, controls on approximating
edge curves by polylines and the method by which picked edges and vertices
are sorted. It allows the picking ray to be constrained by near/far planes
and for a scale factor to be specified for bodies and the picking ray.


Reports
If frames are being picked, they are output in a report rather than in the
returned structure. A Parasolid report of type <A HREF=../headers/pk_report_record_type_t.html>PK_REPORT_record_type_3_c</A> with a
<B>'status'</B> of <A HREF=../headers/pk_report_3_t.html>PK_REPORT_3_picked_frames_c</A> is returned and contains details of the
picked frames.

</PRE>

<SCRIPT type="text/JavaScript" language="JavaScript">
<!-- 
// Change date to a readable format
function to_utc(date)
{var utc = date.toUTCString();return utc;}

// get last modified date of the current document.
function date_lastmodified()
{var mod = document.lastModified, s = "Unknown", d1;
 if(0 != (d1=Date.parse(mod)))
  {s = to_utc(new Date(d1));}
 return s;}	
// display the last modified date
document.write("<ADDRESS>Generated on: " + date_lastmodified() + "</ADDRESS>");
// -->
</SCRIPT>
</BODY>
</HTML>
