<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<TITLE>PK_PARTITION_receive_u</TITLE>
<LINK rel="stylesheet" href="../ps_doc.css">
</HEAD>
<BODY bgcolor="#ffffff" link="#0F3A68" vlink="#878787" alink="#FF7600" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" background="../images/background.gif">
<A NAME="topofdoc"></A>

<TABLE cellpadding=0 cellspacing=0 border=0 width=100%>
  <TR>
    <TD>&nbsp;<IMG src="../graphics/psbar_l.gif" border=0></TD>
    <TD align=RIGHT valign=CENTER>
        <FONT face="helvetica,arial" SIZE=5 class=NS28pt>
        <B>PK_PARTITION_receive_u</B></FONT></TD>
    <TD>&nbsp;&nbsp;</TD>
  </TR>
</TABLE>

<A NAME="endofcontents"></A>
<PRE>

<A NAME="declaration"></A><B><A HREF=../headers/pk_error_code_t.html>PK_ERROR_code_t</A>                  PK_PARTITION_receive_u
(
<I>--- received arguments ---
</I>const <A HREF=../headers/pk_uchar_t.html>PK_UCHAR_t</A>                *key,         --- key string
const <A HREF=../headers/pk_partition_receive_o_t.html>PK_PARTITION_receive_o_t</A>  *options,     --- receive options

<I>--- returned arguments ---
</I><A HREF=../headers/pk_partition_t.html>PK_PARTITION_t</A>            *const partition    --- partition
)
</B>
<A NAME="description"></A>
<I>This function receives a partition from the given Unicode 'file' key.
</I>
<A NAME="errors"></A>
<B>Specific Errors:</B>
    PK_ERROR_rollback_not_started  Partitioned rollback is not active (MILD)
    PK_ERROR_bad_key               Frustrum (UCOPRD) returned FR_bad_name
                                   (MILD)
    PK_ERROR_key_not_found         Frustrum (UCOPRD) returned FR_not_found
                                   (MILD)
    PK_ERROR_cant_open_file        Frustrum (UCOPRD) returned FR_open_fail
                                   (MILD)
    PK_ERROR_file_access_error     Error reading or closing the transmit file
                                   (MILD)
    PK_ERROR_schema_access_error   Error opening, closing, or reading the
                                   schema file (MILD)
    PK_ERROR_schema_corrupt        Contents of schema file not as expected
                                   (MILD)
    PK_ERROR_schema_incompatible   Schema contents in newer format (MILD)
    PK_ERROR_wrong_format          File does not have expected transmit
                                   format (MILD)
    PK_ERROR_wrong_version         File transmitted by incompatible version
                                   of modeller (MILD)
    PK_ERROR_wrong_version_delta   File transmitted by a version of the
                                   modeller that produces deltas
                                   incompatible with the current version
                                   (MILD)
    PK_ERROR_corrupt_file          Invalid transmit file contents
                                   (MILD/SERIOUS)
    PK_ERROR_file_read_corruption  Corrupt data read, perhaps an NFS problem
                                   (MILD)
    PK_ERROR_size_mismatch         Transmitted parts created with different
                                   modeller resolution settings (MILD)
    PK_ERROR_attr_defn_mismatch    Transmitted attribute definitions do not
                                   match current ones (MILD)
    PK_ERROR_usfd_mismatch         File has incompatible user-field size (MILD)
    PK_ERROR_withdrawn_surface     File contains a withdrawn blend surface
                                   (MILD)
    PK_ERROR_FG_receive_failure    Partition contains irretrievable foreign
                                   geometry (MILD)

If the <B>'transmit_format'</B> option is <A HREF=../headers/pk_transmit_format_t.html>PK_transmit_format_applio_c</A>:

    PK_ERROR_applio_not_registered Application i/o functions not registered
                                   (MILD)

If the <B>'receive_deltas'</B> option is PK_PARTITION_rcv_deltas_yes_c:

    PK_ERROR_deltas_not_available  Frustrum (UCOPRD) returned FR_not_found for
                                   the delta file of the partition (MILD)

If the <B>'receive_compound'</B> option is <A HREF=../headers/pk_receive_compound_t.html>PK_receive_compound_fail_c</A>:

    PK_ERROR_compound_body         Partition contains a compound body (MILD)

If facet geometry is not enabled in the session:

    PK_ERROR_facet_geometry        Partition contains facet geometry (MILD)
    PK_ERROR_lattice_geometry      Partition contains a lattice (MILD)

If the <B>'receive_mixed'</B> option is <A HREF=../headers/pk_receive_mixed_t.html>PK_receive_mixed_fail_c</A>:

    PK_ERROR_mixed_geometry        A part contains mixed facet and classic
                                   geometry (MILD)

If the <B>'receive_locked'</B> option is <A HREF=../headers/pk_receive_locked_t.html>PK_receive_locked_always_c</A>, and the calling
thread has no partitions locked:

    PK_ERROR_not_stopped           Thread is in a chain (MILD)
    PK_ERROR_recursion_depth       Called within an outer PK or KI function
                                   (MILD)
    PK_ERROR_bb_not_empty          Bulletin board is not empty (MILD)

<A NAME="documentation"></A>
Before this function can be used, it must be enabled by
<A HREF=../headers/pk_session_set_unicode.html>PK_SESSION_set_unicode</A> and then calls to <A HREF=../headers/pk_session_register_frustrum.html>PK_SESSION_register_frustrum</A> and/or
<A HREF=../headers/pk_session_register_applio.html>PK_SESSION_register_applio</A>.

The Unicode key is passed to the frustrum to identify the 'file' used to
receive the partition from.

The registered frustrum routine UCOPRD is called with guise FFCXMP
(transmit file containing a partition).

The transmit format option affects the format argument to UCOPRD as follows:

    transmit format                format

    <A HREF=../headers/pk_transmit_format_t.html>PK_transmit_format_text_c</A>      FFTEXT
    <A HREF=../headers/pk_transmit_format_t.html>PK_transmit_format_binary_c</A>    FFBNRY
    <A HREF=../headers/pk_transmit_format_t.html>PK_transmit_format_neutral_c</A>   FFBNRY
    <A HREF=../headers/pk_transmit_format_t.html>PK_transmit_format_applio_c</A>   (function <B>'open_uc_rd'</B> is called -
                                   see <A HREF=../headers/pk_session_register_applio.html>PK_SESSION_register_applio</A>)

If the <B>'receive_deltas'</B> option is PK_PARTITION_rcv_deltas_no_c, the partition
will have only one (initial) pmark; if it is PK_PARTITION_rcv_deltas_later_c,
the partition will have two pmarks and will be 'at' the non-initial one. if it
is PK_PARTITION_rcv_deltas_yes_c, the partition will have all the pmarks with
which it was transmitted and will be 'at' the same pmark as when it was
transmitted.

If the option <B>'receive_deltas'</B> is PK_PARTITION_rcv_deltas_yes_c and
<B>'allow_missing_deltas'</B> is PK_LOGICAL_true, a partition file without its
delta file will be received successfully but with no deltas, i.e. as though
<B>'receive_deltas'</B> were PK_PARTITION_rcv_deltas_no_c.

If the option <B>'receive_deltas'</B> is not PK_PARTITION_rcv_deltas_no_c, and
<B>'receive_prev_version_deltas'</B> is set to PK_LOGICAL_true, it is assumed that an
attempt to read deltas transmitted from an earlier version of Parasolid will
be made. In this case a check is made on the version of Parasolid used to
transmit the file. Where it is found to be from a version of Parasolid which
produces delta files incompatible with the current version, the error
PK_ERROR_wrong_version_delta will be returned.

When option <B>'receive_deltas'</B> is not PK_PARTITION_rcv_deltas_no_c, and
<B>'receive_prev_version_deltas'</B> is set to PK_LOGICAL_false, <A HREF=../headers/pk_partition_receive.html>PK_PARTITION_receive</A>
will return PK_ERROR_wrong_version_delta if the file is not transmitted from
the same version of Parasolid.

The option <B>'receive_prev_version_deltas'</B> is ignored when <B>'receive_deltas'</B> is
PK_PARTITION_rcv_deltas_no_c.

</PRE>

<SCRIPT type="text/JavaScript" language="JavaScript">
<!-- 
// Change date to a readable format
function to_utc(date)
{var utc = date.toUTCString();return utc;}

// get last modified date of the current document.
function date_lastmodified()
{var mod = document.lastModified, s = "Unknown", d1;
 if(0 != (d1=Date.parse(mod)))
  {s = to_utc(new Date(d1));}
 return s;}	
// display the last modified date
document.write("<ADDRESS>Generated on: " + date_lastmodified() + "</ADDRESS>");
// -->
</SCRIPT>
</BODY>
</HTML>
