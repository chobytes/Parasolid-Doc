<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<TITLE>PK_TOPOL_render_facet</TITLE>
<LINK rel="stylesheet" href="../ps_doc.css">
</HEAD>
<BODY bgcolor="#ffffff" link="#0F3A68" vlink="#878787" alink="#FF7600" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" background="../images/background.gif">
<A NAME="topofdoc"></A>

<TABLE cellpadding=0 cellspacing=0 border=0 width=100%>
  <TR>
    <TD>&nbsp;<IMG src="../graphics/psbar_l.gif" border=0></TD>
    <TD align=RIGHT valign=CENTER>
        <FONT face="helvetica,arial" SIZE=5 class=NS28pt>
        <B>PK_TOPOL_render_facet</B></FONT></TD>
    <TD>&nbsp;&nbsp;</TD>
  </TR>
</TABLE>

<A NAME="endofcontents"></A>
<PRE>

<A NAME="declaration"></A><B><A HREF=../headers/pk_error_code_t.html>PK_ERROR_code_t</A>                  PK_TOPOL_render_facet
(
<I>--- received arguments ---
</I>const int                        n_topols,        --- number of entities
const <A HREF=../headers/pk_topol_t.html>PK_TOPOL_t</A>                 topols[],        --- entities to be facetted
const <A HREF=../headers/pk_transf_t.html>PK_TRANSF_t</A>                topol_transfs[], --- applied transformations
const <A HREF=../headers/pk_transf_t.html>PK_TRANSF_t</A>                view_transf,     --- viewing transformation
const <A HREF=../headers/pk_topol_render_facet_o_t.html>PK_TOPOL_render_facet_o_t</A> *options          --- options structure [PF]
)
</B>
<A NAME="description"></A>
<I>Generate a facetted representation of topological entities through GO.

This function offers partial support for topology that has facet geometry
(meshes & plines) [PF]
</I>
<A NAME="errors"></A>
<B>Specific Errors:</B>
    PK_ERROR_duplicate_array_item   topol has duplicates but no transf array
                                    (MILD)
    PK_ERROR_bad_component          topol or view transf is inappropriate
                                    (MILD)
    PK_ERROR_field_of_wrong_type    <A HREF=../headers/pk_facet_match_t.html>PK_facet_match_topol_c</A> requires cull_none_c
                                    (MILD)
    PK_ERROR_unsuitable_topology    entity in topols array is not face or body
                                    (MILD)
    PK_ERROR_bad_combination        <B>'consistent_parms'</B> set to
                                    <A HREF=../headers/pk_facet_consistent_parms_t.html>PK_facet_consistent_parms_fa_c</A> and <B>'degen'</B>
                                    set to <A HREF=../headers/pk_facet_degen_t.html>PK_facet_degen_single_vx_c</A> (MILD)
    PK_ERROR_function_not_exclusive <B>'incremental_facetting'</B> option value is
                                    incompatible with the function running
                                    concurrently in a thread without locked
                                    partitions (MILD)

<A NAME="documentation"></A>
See <A HREF="../chapters/fd_chap.110.html#50409901_pgfId-294742">here</A> for more information.

Each received topological entity can be a general, solid or a sheet body or
face, if any other type of topological entity appears in 'topols' the error
PK_ERROR_unsuitable_topology will be returned.

Note that general bodies with facet geometry are not supported.

If <B>'topol_transfs'</B> is set to NULL the <B>'topols'</B> entities are not transformed
(and the <B>'topols'</B> array cannot contain duplicates).

If <B>'topol_transfs'</B> is not NULL, it is an array of TRANSFs of length <B>'n_topols'</B>.
The <B>'topols'</B> array can contain duplicates in this case. Each entity in <B>'topols'</B>
is transformed by its corresponding entity in <B>'topol_transfs'</B>.
Any entry in the <B>'topol_transfs'</B> array can be PK_ENTITY_null, indicating that
the corresponding entity in <B>'topols'</B> is not to be transformed.
Transforms may only contain translation, rotation and reflection components;
scales, shears and perspective are not allowed.

The <B>'view_transf'</B> argument is only used when generating view-dependent facet
data for the back face culling and the increased local silhouette density
options.  The <B>'view_transf'</B> may contain perspective components but the
perspective will only be taken into account for back face culling; for
increased local silhouette density only the directional component of the
<B>'view_transf'</B> will be used.

Facet vertex coordinates are always output through GO as world coordinates
even when a viewing transform entity is provided (data must be transformed
into the viewing coordinate system before display).

The <A HREF=../headers/pk_topol_facet_o_t.html>PK_TOPOL_facet_o_t</A> options structure defines two sets of controls

    1) how the facet mesh is generated
    2) which additional GO data are output

The mesh generation options include parameters such as the maximum number
of sides per facet and the tolerance values which are to be used when
approximating surfaces by planar facets.

By default, only the facet coordinate data are output through GO.
The additional GO data options denote whether the function should
calculate and output the following data through GO :

    - face normals
    - surface parameters
    - first and second order derivatives of the surface parameterisation
    - principal directions and curvatures of the face
    - owner edge identifiers

and whether it should output facets individually or in facet strip form.

If derivatives are requested, the cross product dPdu X dPdv points in the
same direction as the surface normal. This is true except in the case where
a transform is supplied for which <A HREF=../headers/pk_transf_classify.html>PK_TRANSF_classify</A> on the transform returns
a matrix_type of <A HREF=../headers/pk_matrix_type_t.html>PK_matrix_type_reflection_c</A>. In this case, each dPdu X dPdv
points in the opposite direction to the corresponding surface normal.

The following restrictions apply when generating facet data:

    - if topology edge matching is on, the <B>'cull'</B> option must not be used

    - the <B>'view_transf'</B> matrix may not contain reflections, scales or shear
      components.

    - the silhouette density option <A HREF=../headers/pk_facet_density_t.html>PK_facet_density_use_view_c</A> only uses the
      directional component of the viewing transform entity (and it assumes a
      parallel view).  If multiple view_directions are supplied via the option
      <B>'view_directions'</B>, these directions will override the <B>'view_transf'</B>.

    - if incremental facetting is on then only geometry or topology matching is
      allowed.

    - if the function is running concurrently in a thread without locked
      partitions then incremental facetting must be off.

    - if <B>'consistent_parms'</B> is set to <A HREF=../headers/pk_facet_consistent_parms_t.html>PK_facet_consistent_parms_fa_c</A> then the
      <B>'degen'</B> option cannot be set to <A HREF=../headers/pk_facet_degen_t.html>PK_facet_degen_single_vx_c</A>.

</PRE>

<SCRIPT type="text/JavaScript" language="JavaScript">
<!-- 
// Change date to a readable format
function to_utc(date)
{var utc = date.toUTCString();return utc;}

// get last modified date of the current document.
function date_lastmodified()
{var mod = document.lastModified, s = "Unknown", d1;
 if(0 != (d1=Date.parse(mod)))
  {s = to_utc(new Date(d1));}
 return s;}	
// display the last modified date
document.write("<ADDRESS>Generated on: " + date_lastmodified() + "</ADDRESS>");
// -->
</SCRIPT>
</BODY>
</HTML>
