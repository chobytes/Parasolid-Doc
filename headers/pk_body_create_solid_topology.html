<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<TITLE>PK_BODY_create_solid_topology</TITLE>
<LINK rel="stylesheet" href="../ps_doc.css">
</HEAD>
<BODY background=../graphics/deprecated.gif link="#0F3A68" vlink="#878787" alink="#FF7600" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<A NAME="topofdoc"></A>

<TABLE cellpadding=0 cellspacing=0 border=0 width=100%>
  <TR>
    <TD>&nbsp;<IMG src="../graphics/psbar_l.gif" border=0></TD>
    <TD align=RIGHT valign=CENTER>
        <FONT face="helvetica,arial" SIZE=5 class=NS28pt>
        <B>PK_BODY_create_solid_topology</B></FONT></TD>
    <TD>&nbsp;&nbsp;</TD>
  </TR>
</TABLE>

<A NAME="endofcontents"></A>
<PRE>

<A NAME="declaration"></A><B><A HREF=../headers/pk_error_code_t.html>PK_ERROR_code_t</A>         PK_BODY_create_solid_topology
(
<I>--- received arguments ---
</I>int                     n_topols,    --- number of topols
const <A HREF=../headers/pk_class_t.html>PK_CLASS_t</A>        classes[],   --- class of each topol
int                     n_relations, --- number of relations
const int               parents[],   --- parents
const int               children[],  --- children
const <A HREF=../headers/pk_topol_sense_t.html>PK_TOPOL_sense_t</A>  senses[],    --- sense in which child used by parent

<I>--- returned arguments ---
</I><A HREF=../headers/pk_body_t.html>PK_BODY_t</A>        *const body,        --- created body
<A HREF=../headers/pk_topol_t.html>PK_TOPOL_t</A>       *const topols,      --- created topols
<A HREF=../headers/pk_body_fault_t.html>PK_BODY_fault_t</A>  *const fault,       --- fault indicator
int              *const fault_index  --- index of fault topol
)
</B>
<A NAME="description"></A>
<I>This function creates the topology of a solid body.

NOTE: This function is deprecated and has been superseded by
<A HREF=../headers/pk_body_create_topology_2.html>PK_BODY_create_topology_2</A>.

</I>
<A NAME="errors"></A>
<B>Specific Errors:</B>
    PK_ERROR_bad_class             bad class in <B>'classes'</B> array
    PK_ERROR_bad_value             a value in <B>'parents'</B> or <B>'children'</B> array
                                   is not a valid index to <B>'classes'</B> array

<A NAME="documentation"></A>
The array <B>'classes'</B> specifies the class of each topological entity.
Currently the only allowed values are:

    PK_CLASS_body
    PK_CLASS_shell
    PK_CLASS_face
    PK_CLASS_loop
    PK_CLASS_edge
    PK_CLASS_vertex

Each topological entity is referred to by its index in this array.

The arrays `parents, <B>'children'</B> and <B>'senses'</B> are all the same length which
is <B>'n_relations'</B>.
`parents[i]', `children[i]' and `senses[i]' define one relation between
two topological entities.  The values put into <B>'parents'</B> and <B>'children'</B>
are indices of the <B>'classes'</B> array.

It is optional whether a topological entity of class PK_CLASS_body appears
in the <B>'classes'</B> array.  If it does appear then it must be the first entry
and its relations with its children must all be defined.  If no
PK_CLASS_body appears in <B>'classes'</B> then the body's children are all the
topological entities which have no defined parent.  Such orphans may
currently only be shells, and if there is more than one, then the first
shell in <B>'classes'</B> must be the outer shell.

The following rules apply to the order of the relations:

 - the child relations to a common parent need not be contiguous.

 - when a body has more than one (shell) child defined then the outer shell
   must appear first.

 - edge children of a loop must appear in order around the loop.

 - vertex children of an edge must appear in the order of the direction of
   the edge.

<B>'senses'</B> indicate the manner in which a child is used by its parent.  This is
currently only meaningful for edge children where the sense should be set to:

    PK_TOPOL_sense_positive_c   the edge is in the same direction as its
                                parent loop

    PK_TOPOL_sense_negative_c   the edge is in the opposite direction to its
                                parent loop.

All other senses should be set to PK_TOPOL_sense_none_c.

The permitted classes and numbers of children and parents are as follows:

--------------------------------------------------------------------
Entity    Children      No. of children   Parents     No. of parents
--------------------------------------------------------------------
Body      Shells              &gt;=1           -             -
Shell     Faces               &gt;=1         Body            1
Face      Loops               &gt;=0         Shell           1
Loop      Edges               &gt;=1         Face            1
          or single vertex    1
Edge      Vertices            &lt;=2         Loops           2
Vertex    None                0           Edges           &gt;=1
                                          or single loop  1
--------------------------------------------------------------------

NB: - Each edge must be used twice as a child, once with each sense (this
      may be in the same loop).
    - A loop must have either a number of edges (with senses) as children,
      or a single vertex; it cannot have a mixture of edges and vertices, or
      more than one vertex.
    - A vertex must have a number of edges as parents, or a single loop; it
      cannot have both edges and loops, or more than one loop.

Success of the function is indicated by there being no PK error returned
and by <B>'fault'</B> being set to PK_BODY_fault_no_fault_c.

If the creation is successful:

 -  the created body is returned in <B>'body'</B>. As it has no geometry attached
    it will not pass the checker.
 -  the entities corresponding to the entries in the <B>'classes'</B> array are
    returned in the <B>'topols'</B> array.  (Note that if a PK_CLASS_body appears
    in the <B>'classes'</B> array then the created body will appear in <B>'topols'</B>
    as well as in <B>'body'</B>.

If the creation is unsuccessful but no PK error is returned:

 -  no body is created
 -  a fault indicator is returned in <B>'fault'</B>
    (see documentation for <A HREF=../headers/pk_body_fault_t.html>PK_BODY_fault_t</A>)
 -  the index (in the <B>'classes'</B> array) of the faulty item is returned if
    possible


</PRE>

<SCRIPT type="text/JavaScript" language="JavaScript">
<!-- 
// Change date to a readable format
function to_utc(date)
{var utc = date.toUTCString();return utc;}

// get last modified date of the current document.
function date_lastmodified()
{var mod = document.lastModified, s = "Unknown", d1;
 if(0 != (d1=Date.parse(mod)))
  {s = to_utc(new Date(d1));}
 return s;}	
// display the last modified date
document.write("<ADDRESS>Generated on: " + date_lastmodified() + "</ADDRESS>");
// -->
</SCRIPT>
</BODY>
</HTML>
